import{a as Me}from"./chunk-QQERHAXB.js";import{a as Re,b as $e}from"./chunk-ZPV4GNWT.js";import{b as Ge}from"./chunk-LFGIHUEI.js";import{b as Le}from"./chunk-VQHYYTZD.js";import{a as Ne,e as we,g as Ke}from"./chunk-IFEE7RF4.js";import{Ka as Fe}from"./chunk-5V6T3QYL.js";import"./chunk-ZDGAUC7Z.js";import{a as Oe}from"./chunk-MUOSKTGI.js";import"./chunk-RXRC2IAU.js";import{c as ve,e as _,f as be,g as he,h as xe,k as Ce,l as Se,m as Ee,n as Ie,o as Te,p as De,q as Be,r as Ae,t as Ve,u as ze,v as ke}from"./chunk-DO327FSU.js";import{$ as ce,A as ae,Z as le,aa as pe,ba as de,ca as se,fa as me,ga as _e,ha as ue,ia as ye,la as ge,qa as fe,u as ee,v as te,w as ie,x as ne,y as oe,z as re}from"./chunk-W7O4NI74.js";import"./chunk-RXWOWTKC.js";import{d as U,e as W,j as X,w as J,y as Q,z as Z}from"./chunk-H4Z643GT.js";import{Ac as l,Bc as w,Cc as u,Kc as I,Rb as c,Sb as r,Tb as n,Ub as b,Za as a,cc as E,ic as C,ka as h,kb as A,la as x,lc as p,ma as H,pb as j,vb as v,vc as N}from"./chunk-G573C4CW.js";import{a as P,b as Y}from"./chunk-AQY5CCQG.js";function He(t,o){if(t&1){let e=E();r(0,"c-header-nav",16)(1,"c-nav-item")(2,"button",17),C("click",function(){h(e);let d=p();return x(d.addRow())}),l(3,"Add"),n()()()}}function je(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.buyer)),a(),w(e.buyer)}}function Ue(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.orderNo)),a(),w(e.orderNo)}}function We(t,o){if(t&1){let e=E();r(0,"div",7)(1,"c-input-group")(2,"span",8),l(3,"Order No"),n(),r(4,"select",19),C("change",function(){h(e);let d=p();return x(d.loadStyle())}),r(5,"option"),l(6,"Select"),n(),v(7,Ue,2,3,"option",10),n()()()}if(t&2){let e=p();a(4),c("disabled",e.items.length>0),a(3),c("ngForOf",e.listOrderNo)}}function Xe(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("Style : ",(e=i.get("Style"))==null?null:e.value)}}function Je(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("Color : ",(e=i.get("Color"))==null?null:e.value)}}function Qe(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("Size : ",(e=i.get("Size"))==null?null:e.value)}}function Ze(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("FSize : ",(e=i.get("FSize"))==null?null:e.value)}}function et(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("FabType : ",(e=i.get("FabType"))==null?null:e.value)}}function tt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("FabDia : ",(e=i.get("FabDia"))==null?null:e.value)}}function it(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("FabGsm : ",(e=i.get("FabGsm"))==null?null:e.value)}}function nt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("KnitSL : ",(e=i.get("KnitSL"))==null?null:e.value)}}function ot(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("YarnType : ",(e=i.get("YarnType"))==null?null:e.value)}}function rt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("FabType : ",(e=i.get("FabType"))==null?null:e.value)}}function at(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("DyeType : ",(e=i.get("dyetype"))==null?null:e.value)}}function lt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("SpinFty : ",(e=i.get("SpinFty"))==null?null:e.value)}}function ct(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("KnitFty : ",(e=i.get("KnitFty"))==null?null:e.value)}}function pt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("DyeinFty : ",(e=i.get("DyeinFty"))==null?null:e.value)}}function dt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("OrderPcs : ",(e=i.get("OrderPcs"))==null?null:e.value)}}function st(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("OrderFOBRate : ",(e=i.get("OrderFOBRate"))==null?null:e.value)}}function mt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("KnitRate : ",(e=i.get("KnitRate"))==null?null:e.value)}}function _t(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("DyeRate : ",(e=i.get("DyeRate"))==null?null:e.value)}}function ut(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("YarnKg : ",(e=i.get("YarnKg"))==null?null:e.value)}}function yt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("GreigeKg : ",(e=i.get("GreigeKg"))==null?null:e.value)}}function gt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),u("FinishKg : ",(e=i.get("FinishKg"))==null?null:e.value)}}function ft(t,o){if(t&1){let e=E();r(0,"button",23),C("click",function(){h(e),p();let d=N(1);return x(d.toggleItem())}),r(1,"div")(2,"div")(3,"span"),l(4),n()(),r(5,"div"),v(6,Xe,2,1,"mat-chip",24)(7,Je,2,1,"mat-chip",24)(8,Qe,2,1,"mat-chip",24)(9,Ze,2,1,"mat-chip",24)(10,et,2,1,"mat-chip",24)(11,tt,2,1,"mat-chip",24)(12,it,2,1,"mat-chip",24)(13,nt,2,1,"mat-chip",24)(14,ot,2,1,"mat-chip",24)(15,rt,2,1,"mat-chip",24)(16,at,2,1,"mat-chip",24)(17,lt,2,1,"mat-chip",24)(18,ct,2,1,"mat-chip",24)(19,pt,2,1,"mat-chip",24)(20,dt,2,1,"mat-chip",24)(21,st,2,1,"mat-chip",24)(22,mt,2,1,"mat-chip",24)(23,_t,2,1,"mat-chip",24)(24,ut,2,1,"mat-chip",24)(25,yt,2,1,"mat-chip",24)(26,gt,2,1,"mat-chip",24),n()()()}if(t&2){let e,i,d,m,F,s,S,V,B,z,k,y,O,f,T,K,L,G,R,$,M,q=p(),g=q.$implicit,Pe=q.index,Ye=N(1);c("collapsed",!Ye.visible),a(4),u("Fabric Booking Details ",Pe+1),a(2),c("ngIf",(e=g.get("Style"))==null?null:e.value),a(),c("ngIf",(i=g.get("Color"))==null?null:i.value),a(),c("ngIf",(d=g.get("Size"))==null?null:d.value),a(),c("ngIf",(m=g.get("FSize"))==null?null:m.value),a(),c("ngIf",(F=g.get("FabType"))==null?null:F.value),a(),c("ngIf",(s=g.get("FabDia"))==null?null:s.value),a(),c("ngIf",(S=g.get("FabGsm"))==null?null:S.value),a(),c("ngIf",(V=g.get("KnitSL"))==null?null:V.value),a(),c("ngIf",(B=g.get("YarnType"))==null?null:B.value),a(),c("ngIf",(z=g.get("FabType"))==null?null:z.value),a(),c("ngIf",(k=g.get("dyetype"))==null?null:k.value),a(),c("ngIf",(y=g.get("SpinFty"))==null?null:y.value),a(),c("ngIf",(O=g.get("KnitFty"))==null?null:O.value),a(),c("ngIf",(f=g.get("DyeinFty"))==null?null:f.value),a(),c("ngIf",(T=g.get("OrderPcs"))==null?null:T.value),a(),c("ngIf",(K=g.get("OrderFOBRate"))==null?null:K.value),a(),c("ngIf",(L=g.get("KnitRate"))==null?null:L.value),a(),c("ngIf",(G=g.get("DyeRate"))==null?null:G.value),a(),c("ngIf",(R=g.get("YarnKg"))==null?null:R.value),a(),c("ngIf",($=g.get("GreigeKg"))==null?null:$.value),a(),c("ngIf",(M=g.get("FinishKg"))==null?null:M.value)}}function Ft(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.style)),a(),u(" ",e.style)}}function vt(t,o){if(t&1){let e=E();r(0,"div",7)(1,"c-input-group")(2,"span",8),l(3,"Style"),n(),r(4,"select",47),C("change",function(){h(e);let d=p(2).index,m=p();return x(m.loadColor(d))}),r(5,"option"),l(6,"Select"),n(),v(7,Ft,2,3,"option",10),n()()()}if(t&2){let e=p(3);a(7),c("ngForOf",e.listStyle)}}function bt(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.color)),a(),u(" ",e.color)}}function ht(t,o){if(t&1){let e=E();r(0,"div",7)(1,"c-input-group")(2,"span",8),l(3,"Color"),n(),r(4,"select",48),C("change",function(){h(e);let d=p(2).index,m=p();return x(m.loadFSize(d))}),r(5,"option"),l(6,"Select"),n(),v(7,bt,2,3,"option",10),n()()()}if(t&2){let e,i=p(2).$implicit;a(7),c("ngForOf",(e=i.get("colorList"))==null?null:e.value)}}function xt(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.concatSize)),a(),u(" ",e.concatSize)}}function Ct(t,o){if(t&1){let e=E();r(0,"div",7)(1,"c-input-group")(2,"span",8),l(3,"FSize"),n(),r(4,"select",49),C("change",function(){h(e);let d=p(2).index,m=p();return x(m.loadGSize(d))}),r(5,"option"),l(6,"Select"),n(),v(7,xt,2,3,"option",10),n()()()}if(t&2){let e,i=p(2).$implicit;a(7),c("ngForOf",(e=i.get("gsizeList"))==null?null:e.value)}}function St(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.SpinFtyName)),a(),u(" ",e.SpinFtyName)}}function Et(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.knitFty)),a(),u(" ",e.knitFty)}}function It(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",I(e.dyeFty)),a(),u(" ",e.dyeFty)}}function Tt(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",e.id),a(),u(" ",e.name)}}function Dt(t,o){if(t&1&&(r(0,"div",7)(1,"c-input-group")(2,"span",8),l(3,"Status"),n(),r(4,"select",50)(5,"option"),l(6,"Select"),n(),v(7,Tt,2,2,"option",10),n()()()),t&2){let e=p(3);a(7),c("ngForOf",e.styleList)}}function Bt(t,o){if(t&1){let e=E();r(0,"div",25)(1,"div",6),v(2,vt,8,1,"div",11)(3,ht,8,1,"div",11)(4,Ct,8,1,"div",11),n(),r(5,"div",6)(6,"div",7)(7,"c-input-group")(8,"span",8),l(9,"GSize"),n(),b(10,"input",26),n()(),r(11,"div",7)(12,"c-input-group")(13,"span",8),l(14,"Fab Dia"),n(),b(15,"input",27),n()(),r(16,"div",7)(17,"c-input-group")(18,"span",8),l(19,"Fab Gsm"),n(),b(20,"input",28),n()()(),r(21,"div",6)(22,"div",7)(23,"c-input-group")(24,"span",8),l(25,"Knit SL"),n(),b(26,"input",29),n()(),r(27,"div",7)(28,"c-input-group")(29,"span",8),l(30,"Yarn Type"),n(),b(31,"input",30),n()(),r(32,"div",7)(33,"c-input-group")(34,"span",8),l(35,"Fab Type"),n(),b(36,"input",31),n()()(),r(37,"div",6)(38,"div",7)(39,"c-input-group")(40,"span",8),l(41,"Dye Type"),n(),b(42,"input",32),n()(),r(43,"div",7)(44,"c-input-group")(45,"span",8),l(46,"Spin Fty"),n(),r(47,"select",33),C("click",function(){h(e);let d=p(2);return x(d.loadSpinFty())})("change",function(){h(e);let d=p().index,m=p();return x(m.loadSpinFtyId(d))}),r(48,"option"),l(49,"Select"),n(),v(50,St,2,3,"option",10),n()()(),r(51,"div",7)(52,"c-input-group")(53,"span",8),l(54,"Knit Fty"),n(),r(55,"select",34),C("click",function(){h(e);let d=p(2);return x(d.loadKnitFty())})("change",function(){h(e);let d=p().index,m=p();return x(m.loadKnitFtyId(d))}),r(56,"option"),l(57,"Select"),n(),v(58,Et,2,3,"option",10),n()()()(),r(59,"div",6)(60,"div",7)(61,"c-input-group")(62,"span",8),l(63,"DyeinFty"),n(),r(64,"select",35),C("click",function(){h(e);let d=p(2);return x(d.loadDyeinFty())})("change",function(){h(e);let d=p().index,m=p();return x(m.loadDyeFtyId(d))}),r(65,"option"),l(66,"Select"),n(),v(67,It,2,3,"option",10),n()()(),r(68,"div",7)(69,"c-input-group")(70,"span",8),l(71,"OrderPcs"),n(),b(72,"input",36),n()(),r(73,"div",7)(74,"c-input-group")(75,"span",8),l(76,"Order FOB Rate"),n(),b(77,"input",37),n()()(),r(78,"div",6)(79,"div",7)(80,"c-input-group")(81,"span",8),l(82,"KnitRate"),n(),b(83,"input",38),n()(),r(84,"div",7)(85,"c-input-group")(86,"span",8),l(87,"DyeRate"),n(),b(88,"input",39),n()(),r(89,"div",7)(90,"c-input-group")(91,"span",8),l(92,"YarnKg"),n(),b(93,"input",40),n()()(),r(94,"div",6)(95,"div",7)(96,"c-input-group")(97,"span",8),l(98,"GreigeKg"),n(),b(99,"input",41),n()(),r(100,"div",7)(101,"c-input-group")(102,"span",8),l(103,"FinishKg"),n(),b(104,"input",42),n()(),v(105,Dt,8,1,"div",11),n(),r(106,"div",43)(107,"div",44)(108,"button",45),C("click",function(){h(e);let d=p().index,m=p();return x(m.removeItem(d))}),H(),b(109,"svg",46),n()()()()}if(t&2){let e=p(2);a(2),c("ngIf",e.listStyle.length>0),a(),c("ngIf",e.listColor.length>0),a(),c("ngIf",e.concatSizeList.length>0),a(46),c("ngForOf",e.spinFtyList),a(8),c("ngForOf",e.knitFtyList),a(9),c("ngForOf",e.dyeFtyList),a(38),c("ngIf",e.identityRouter),a(4),c("cIcon",e.icons.cilXCircle)}}function At(t,o){if(t&1&&(r(0,"c-accordion-item",20,0),v(2,ft,27,23,"ng-template",21)(3,Bt,110,8,"ng-template",22),n()),t&2){let e=o.index;c("visible",!1)("formGroupName",e)}}function Vt(t,o){if(t&1){let e=E();r(0,"div",16)(1,"button",51),C("click",function(){h(e);let d=p();return x(d.saveUpdate(d.identityRouter?"2":"1"))}),l(2),n()()}if(t&2){let e=p();a(2),u(" ",e.identityRouter?"Edit changes":"Save changes"," ")}}var D=class D{constructor(o,e,i,d){this.router=o;this.fb=e;this.api=i;this.route=d;this.icons={cilXCircle:Fe};this.styleList=[{name:"True",id:1},{name:"False",id:0}];this.listBuyer=[];this.listOrderNo=[];this.listStyle=[];this.listColor=[];this.concatSizeList=[];this.spinFtyList=[];this.knitFtyList=[];this.dyeFtyList=[];this.selectedBuyer="";this.filterSpinFty="";this.fabricBookingForm=this.fb.group({Buyer:[null,[_.required]],OrderNo:[null,[_.required]],data:this.fb.array([])})}ngOnInit(){this.buyerRouter=this.route.snapshot.paramMap.get("Buyer"),this.orderNoRouter=this.route.snapshot.paramMap.get("orderNo"),this.idRouter=this.route.snapshot.paramMap.get("id"),this.identityRouter=this.route.snapshot.paramMap.get("identity")==="true"?this.route.snapshot.paramMap.get("identity"):!1,this.orderNoRouter&&this.callEdit(this.orderNoRouter),this.loadBuyer()}get items(){return this.fabricBookingForm.get("data")}addRow(){let o=this.fb.group({id:[""],poid:["",_.required],polineId:["",_.required],Style:["",_.required],Color:["",_.required],Size:["",_.required],FSize:["",_.required],SizeId:["",_.required],FabType:["",_.required],fabricTypeId:["",_.required],FabDia:["",_.required],FabDiaId:["",_.required],FabGsm:["",_.required],FabGsmId:[0],YarnKg:["",_.required],GreigeKg:["",_.required],YarnType:["",_.required],YarnTypeId:["",_.required],FinishKg:["",_.required],KnitSL:["",_.required],SpinFty:["",_.required],SpinFtyId:["",_.required],KnitFty:["",_.required],KnitFtyId:["",_.required],DyeinFty:["",_.required],DyeinFtyId:["",_.required],dyetype:["",_.required],dyeTypeId:["",_.required],OrderPcs:["",_.required],OrderFOBRate:["",_.required],KnitRate:["",_.required],DyeRate:["",_.required],status:[1],colorList:[[]],gsizeList:[[]]});this.items.push(o),o.get("OrderPcs")?.valueChanges.subscribe(()=>{this.calculateDiff()}),this.items.length>0&&(this.fabricBookingForm.get("Buyer")?.disable(),this.fabricBookingForm.get("OrderNo")?.disable())}calculateDiff(){this.items.controls.forEach(o=>{let e=o;if(e instanceof xe){let i=parseFloat(e.get("OrderPcs")?.value)||0,d=this.finishFabConsumptionVal/((100-this.rejLossVal-this.colorLossVal)/100)*i/12,m=d/((100-parseInt(this.dyeProcessLossVal)-parseInt(this.fabTypeLossVal)-parseInt(this.dyeTypeLossVal))/100),F=parseFloat(d?.toFixed(2)),s=parseFloat(m?.toFixed(2)),S=parseFloat(m?.toFixed(2));e.get("FinishKg")?.setValue(F??0),e.get("GreigeKg")?.setValue(s??0),e.get("YarnKg")?.setValue(S??0)}})}removeItem(o){this.items.removeAt(o),this.items.length===0&&(this.fabricBookingForm.get("Buyer")?.enable(),this.fabricBookingForm.get("OrderNo")?.enable())}loadBuyer(){this.api.GetApi(`/workorderapi/buyer_order_BO?buyer=${this.selectedBuyer}`).subscribe(o=>{this.listBuyer=o.buyers})}loadSpinFty(){this.spinFtyList.length===0&&this.api.GetApi(`/mastersapi/spinFty-master-filter?spinFty=${this.filterSpinFty}`).subscribe(o=>{this.spinFtyList=o.spinFty})}loadSpinFtyId(o){let i=this.fabricBookingForm.get("data").at(o),d=i.get("SpinFty")?.value,m=this.spinFtyList.find(F=>F.SpinFtyName===d);m&&i.get("SpinFtyId")?.setValue(m?.id)}loadKnitFty(){this.knitFtyList.length===0&&this.api.GetApi("/workorderapi/Knit_Fty_BO").subscribe(o=>{this.knitFtyList=o.knitFty})}loadKnitFtyId(o){let i=this.fabricBookingForm.get("data").at(o),d=i.get("KnitFty")?.value,m=this.knitFtyList.find(F=>F.knitFty===d);m&&i.get("KnitFtyId")?.setValue(m?.id)}loadDyeinFty(){this.dyeFtyList.length===0&&this.api.GetApi("/workorderapi/Dyein_Fty_BO").subscribe(o=>{this.dyeFtyList=o.dyeFty})}loadDyeFtyId(o){let i=this.fabricBookingForm.get("data").at(o),d=i.get("DyeinFty")?.value,m=this.dyeFtyList.find(F=>F.dyeFty===d);m&&i.get("DyeinFtyId")?.setValue(m?.id)}loadOrder(){let o=this.fabricBookingForm.get("Buyer")?.value;this.api.GetApi(`/workorderapi/buyer_order_BO?buyer=${o}&`).subscribe(e=>{this.listOrderNo=e.orderNo})}loadStyle(){let o=this.fabricBookingForm.get("Buyer")?.value,e=this.fabricBookingForm.get("OrderNo")?.value;this.api.GetApi(`/workorderapi/order_style_BO?buyer=${o}&order=${e}&`).subscribe(i=>{this.listStyle=i.style})}loadColor(o){let i=this.fabricBookingForm.get("data").at(o),d=this.fabricBookingForm.get("Buyer")?.value,m=this.fabricBookingForm.get("OrderNo")?.value,F=i.get("Style")?.value;this.api.GetApi(`/workorderapi/style_Color_BO?buyer=${d}&order=${m}&style=${F}&`).subscribe(s=>{this.listColor=s.color,i.get("colorList")?.setValue(s.color||[]),i.get("Color")?.setValue("")})}loadFSize(o){let i=this.fabricBookingForm.get("data").at(o),d=i.get("Style")?.value;this.api.GetApi(`/workorderapi/gsize_BO?style=${d}&`).subscribe(m=>{this.concatSizeList=m.Gsize,i.get("gsizeList")?.setValue(m.Gsize||[]),i.get("FSize")?.setValue("")})}loadGSize(o){let i=this.fabricBookingForm.get("data").at(o),d=this.fabricBookingForm.get("Buyer")?.value,m=this.fabricBookingForm.get("OrderNo")?.value,F=i.get("Style")?.value,s=i.get("Color")?.value,S=i.get("FSize")?.value;this.api.GetApi(`/workorderapi/Fsize_Gsize_BO?style=${F}&fsize=${S}&`).subscribe(V=>{let B=V.Gsize[0]?.size;this.fabricBookingForm.get("data").at(o).get("Size")?.setValue(B),this.api.GetApi(`/workorderapi/Combined_Fsize_FabDetails_Gsize_PODetailsLoss_Size_id_BO?buyer=${d}&order=${m}&style=${F}&color=${s}&size=${B}&fsize=${S}&`).subscribe(y=>{this.sizeDetails={OrderFOBRate:y.sizeId[0]?.poRate||"",OrderPcs:y.sizeId[0]?.quantity||"",polineId:y.sizeId[0]?.id||"",poid:y.sizeId[0]?.orderId||"",FSizeFBC:y.sizeId[0]?.concatSize||"",FSizeFBCId:y.sizeId[0]?.sizeId||"",fabricTypeFBC:y.sizeId[0]?.fabricType||"",fabricTypeFBCId:y.sizeId[0]?.fabricTypeId||"",fabricGSMFBC:y.sizeId[0]?.fabricGSM||"",fabricGSMFBCId:y.sizeId[0]?.fabricGSMId||"",yarnTypeFBC:y.sizeId[0]?.yarnType||"",yarnTypeFBCId:y.sizeId[0]?.yarnTypeId||"",finishDiaFBC:y.sizeId[0]?.finishDia||"",finishDiaFBCId:y.sizeId[0]?.styleId||"",styleIdDta:y.sizeId[0]?.styleId||"",dyeTypeFBC:y.sizeId[0]?.dyeType||"",dyeTypeFBCId:y.sizeId[0]?.dyeTypeId||"",colorId:y.sizeId[0]?.colorId||""},this.finishFabConsumptionVal=y.finishfabConsumption[0]?.finishfabConsumption,this.colorLossVal=y.Colorlosses[0]?.popl;let f=this.fabricBookingForm.get("data").at(o);f.get("polineId")?.setValue(this.sizeDetails.polineId),f.get("poid")?.setValue(this.sizeDetails.poid),f.get("FabType")?.setValue(this.sizeDetails.fabricTypeFBC),f.get("fabricTypeId")?.setValue(this.sizeDetails.fabricTypeFBCId),f.get("FabGsm")?.setValue(this.sizeDetails.fabricGSMFBC),f.get("YarnType")?.setValue(this.sizeDetails.yarnTypeFBC),f.get("YarnTypeId")?.setValue(this.sizeDetails.yarnTypeFBCId),f.get("FabDia")?.setValue(this.sizeDetails.finishDiaFBC),f.get("dyetype")?.setValue(this.sizeDetails.dyeTypeFBC),f.get("dyeTypeId")?.setValue(this.sizeDetails.fabricTypeFBCId),f.get("DyeTypeMaster")?.setValue(this.sizeDetails.DyeTypeLossDta),f.get("fabricType")?.setValue(this.sizeDetails.fabTypeLossDta),f.get("SizeId")?.setValue(this.sizeDetails.FSizeFBCId),f.get("FabDiaId")?.setValue(this.sizeDetails.finishDiaFBCId),f.get("OrderPcs")?.setValue(this.sizeDetails.OrderPcs),f.get("OrderFOBRate")?.setValue(this.sizeDetails.OrderFOBRate),this.api.GetApi(`/workorderapi/Combined_RejTypeLoss_ColorLoss_DyeTypeMaster_fabricType_Details_BO?colorid=${this.sizeDetails.colorId}&StyleId=${this.sizeDetails.styleIdDta}&dyeTypeId=${this.sizeDetails.dyeTypeFBCId}&fabTypeId=${this.sizeDetails.fabricTypeFBCId}&`).subscribe(T=>{this.fabTypeLossVal=T.FabricTypeLoss[0].fabpl,this.dyeTypeLossVal=T.DyeTypeLoss[0].dyepl,this.dyeProcessLossVal=T.DyeProcessLoss[0].DyeProcessLoss,this.rejLossVal=T.RejTypeLoss[0].losses,this.calculateDiff()})})})}callEdit(o,e="",i="",d=""){this.api.GetApi(`/workorderapi/workorders-details-filter?orderNo=${o}&style=${e}&color=${i}&size=${d}&`).subscribe(m=>{this.fabricBookingForm.get("Buyer")?.setValue(m.workorders[0].buyer),this.loadOrder(),this.fabricBookingForm.get("OrderNo")?.setValue(m.workorders[0].orderNo),this.fabricBookingForm.get("Buyer")?.disable(),this.fabricBookingForm.get("OrderNo")?.disable(),this.loadSpinFty(),this.loadKnitFty(),this.loadDyeinFty();let F=this.fabricBookingForm.get("data");F.clear(),m.workorders.forEach(s=>{let S=this.fb.group({id:[s.id],poid:[s.poid],polineId:[s.polineId],Buyer:[s.buyer],OrderNo:[s.orderNo],Style:[s.style],Color:[s.color],Size:[s.size],FSize:[s.FSize],SizeId:[s.sizeid],FabType:[s.fabType],fabricTypeId:[s.fabricTypeId],FabDia:[s.fabDia],FabDiaId:[s.fabdiaId],FabGsm:[s.fabGsm],FabGsmId:[0],YarnKg:[s.yarnKg],GreigeKg:[s.greigeKg],YarnType:[s.yarnType],YarnTypeId:[s.yarnTypeId],FinishKg:[s.finishKg],KnitSL:[s.knitSL],SpinFty:[s.spinFty],SpinFtyId:[s.spinFtyId],KnitFty:[s.knitFty],KnitFtyId:[s.knitFtyId],DyeinFty:[s.dyeinFty],DyeinFtyId:[s.dyeinFtyId],dyetype:[s.dyetype],dyeTypeId:[s.dyeTypeId],OrderPcs:[s.orderPcs],OrderFOBRate:[s.orderFOBRate],KnitRate:[s.knitRate],DyeRate:[s.dyeRate],status:[s.status]});F.push(S)})})}saveUpdate(o){let e={Buyer:this.fabricBookingForm.get("Buyer")?.value,OrderNo:this.fabricBookingForm.get("OrderNo")?.value,data:this.fabricBookingForm.value.data.map(i=>Y(P({},i),{status:parseInt(i.status,10)}))};this.fabricBookingForm.valid&&(o===1?this.api.PostApiWithHeader("/workorderapi/workorder",e).subscribe(i=>{i.success===!0?(this.fabricBookingForm.reset(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")}):this.api.PostApiWithHeader("/workorderapi/workorder",e).subscribe(i=>{i.success===!0?(this.fabricBookingForm.reset(),this.router.navigateByUrl("/pages/fabric/fabricList"),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")}))}};D.\u0275fac=function(e){return new(e||D)(A(Q),A(Ve),A(Oe),A(J))},D.\u0275cmp=j({type:D,selectors:[["app-fabric-add-edit"]],decls:23,vars:7,consts:[["item0","cAccordionItem"],["fluid",""],[3,"routerLink"],["class","ms-auto",4,"ngIf"],["fluid","",3,"formGroup"],[1,"container"],[1,"row","g-3","mb-4"],[1,"col-sm"],["cInputGroupText",""],["aria-label","Buyer","cSelect","","formControlName","Buyer",3,"change","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","col-sm",4,"ngIf"],[1,"row","g-5"],["formArrayName","data"],[3,"visible","formGroupName",4,"ngFor","ngForOf"],[1,"bg-light","text-center","p-2"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click"],[3,"value"],["aria-label","Order No","cSelect","","formControlName","OrderNo",3,"change","disabled"],[3,"visible","formGroupName"],["cTemplateId","accordionHeaderTemplate"],["cTemplateId","accordionBodyTemplate"],["cAccordionButton","",3,"click","collapsed"],[4,"ngIf"],[1,"accordion-body"],["aria-label","GSize","cFormControl","","readonly","","formControlName","Size"],["aria-label","FabDia","cFormControl","","readonly","","formControlName","FabDia"],["aria-label","FabGsm","cFormControl","","readonly","","formControlName","FabGsm"],["aria-label","KnitSL","cFormControl","","type","number","formControlName","KnitSL"],["aria-label","Yarn Type","cFormControl","","readonly","","formControlName","YarnType"],["aria-label","FabType","cFormControl","","readonly","","formControlName","FabType"],["aria-label","Dye Type","cFormControl","","readonly","","formControlName","dyetype"],["aria-label","Spin Fty","cSelect","","formControlName","SpinFty",3,"click","change"],["aria-label","Knit Fty","cSelect","","formControlName","KnitFty",3,"click","change"],["aria-label","DyeinFty","cSelect","","formControlName","DyeinFty",3,"click","change"],["aria-label","OrderPcs","cFormControl","","type","number","formControlName","OrderPcs"],["aria-label","OrderFOBRate","cFormControl","","type","number","formControlName","OrderFOBRate"],["aria-label","KnitRate","cFormControl","","type","number","formControlName","KnitRate"],["aria-label","DyeRate","cFormControl","","type","number","formControlName","DyeRate"],["aria-label","YarnKg","cFormControl","","type","number","formControlName","YarnKg","readonly",""],["aria-label","GreigeKg","cFormControl","","type","number","formControlName","GreigeKg","readonly",""],["aria-label","FinishKg","cFormControl","","type","number","formControlName","FinishKg","readonly",""],[1,"row","g-3","mb-12"],[1,"text-center"],["cButton","","color","link",2,"color","red",3,"click"],["size","xl","title","List Icon",3,"cIcon"],["aria-label","Style","cSelect","","formControlName","Style",3,"change"],["aria-label","Color","cSelect","","formControlName","Color",3,"change"],["aria-label","FSize","cSelect","","formControlName","FSize",3,"change"],["aria-label","Status","cSelect","","formControlName","status"],["cButton","","color","primary",3,"click"]],template:function(e,i){e&1&&(r(0,"c-header")(1,"c-container",1)(2,"c-header-brand",2),l(3,"Fabric Booking"),n(),v(4,He,4,0,"c-header-nav",3),n(),b(5,"c-header-divider"),r(6,"c-container",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"c-input-group")(11,"span",8),l(12,"Buyer"),n(),r(13,"select",9),C("change",function(){return i.loadOrder()}),r(14,"option"),l(15,"Select"),n(),v(16,je,2,3,"option",10),n()()(),v(17,We,8,2,"div",11),n(),r(18,"div",12)(19,"c-accordion",13),v(20,At,4,2,"c-accordion-item",14),n()()()()(),r(21,"footer",15),v(22,Vt,3,1,"div",3),n()),e&2&&(a(4),c("ngIf",!i.identityRouter),a(2),c("formGroup",i.fabricBookingForm),a(7),c("disabled",i.items.length>0),a(3),c("ngForOf",i.listBuyer),a(),c("ngIf",i.listOrderNo.length>0),a(3),c("ngForOf",i.items.controls),a(2),c("ngIf",i.items.length>0))},dependencies:[ge,me,_e,ue,ye,Me,Z,te,ee,se,fe,ae,ie,ke,Be,Ae,ve,Ce,De,be,he,Se,Te,Ee,Ie,ce,pe,de,le,X,U,W,Ge,Le,Ke,Ne,we,ze,ne,oe,re,$e,Re],styles:[".scrollable-dropdown[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto}"]});var qe=D;export{qe as FabricAddEditComponent};
