import{b as Be}from"./chunk-VQHYYTZD.js";import{a as xe,f as Se,g as De}from"./chunk-IFEE7RF4.js";import{a as _e}from"./chunk-MUOSKTGI.js";import"./chunk-RXRC2IAU.js";import{c as se,e as x,f as ue,g as ye,j as ve,l as fe,o as ge,t as be,u as Ce,v as he}from"./chunk-DO327FSU.js";import{A as G,B as R,G as O,Ga as pe,H as j,L as Q,M as U,N as q,X as W,Z as $,_ as J,aa as K,ba as X,ca as Y,fa as Z,ga as ee,ha as te,ia as ie,la as re,qa as oe,ra as ne,sa as ae,ta as le,ua as ce,va as me,wa as de}from"./chunk-W7O4NI74.js";import"./chunk-RXWOWTKC.js";import{d as k,e as V,g as A,j as P,y as H,z}from"./chunk-H4Z643GT.js";import{Ac as o,Bc as g,Cc as w,Ec as I,Fc as M,Gc as N,Rb as c,Sb as i,Tb as t,Ub as p,Vc as L,Za as l,_b as T,cc as C,ic as h,ka as y,kb as b,la as v,lc as s,pb as F,pc as S,qc as D,rc as B,vb as f,vc as _}from"./chunk-G573C4CW.js";import{a as E}from"./chunk-AQY5CCQG.js";var Fe=["scrollableLongContentModal"],Te=["closeBtn"];function we(m,r){if(m&1){let e=C();i(0,"tr")(1,"th",21),o(2),t(),i(3,"td",22),o(4),t(),i(5,"td",22),o(6),t(),i(7,"td",22)(8,"button",23),h("click",function(){let n=y(e).$implicit,d=s(2);return d.openPopup("Edit"),v(d.callEdit(n))}),p(9,"i",24),t()()()}if(m&2){let e=r.$implicit,a=r.index,n=s(2),d=_(13);l(2),g((n.page-1)*n.pageSize+a+1),l(2),g(e.buyer),l(2),g(e.country),l(2),c("cModalToggle",d.id)}}function Ie(m,r){if(m&1){let e=C();i(0,"div",15)(1,"table",16)(2,"thead")(3,"tr")(4,"th",17),o(5,"#"),t(),i(6,"th",17),o(7,"Buyer"),t(),i(8,"th",17),o(9,"Country"),t(),i(10,"th",17),o(11,"Action"),t()()(),i(12,"tbody"),f(13,we,10,4,"tr",18),t()(),i(14,"div",19)(15,"ngb-pagination",20),N("pageChange",function(n){y(e);let d=s();return M(d.page,n)||(d.page=n),v(n)}),t()()()}if(m&2){let e=s();l(),c("striped",!0),l(12),c("ngForOf",e.buyersList.slice((e.page-1)*e.pageSize,e.page*e.pageSize)),l(2),I("page",e.page),c("boundaryLinks",!0)("maxSize",3)("pageSize",e.pageSize)("collectionSize",e.buyersList.length)}}function Me(m,r){m&1&&(i(0,"div",25)(1,"c-card",26),p(2,"img",27),i(3,"c-card-body")(4,"h5",28),o(5,"No Data Found"),t(),i(6,"p",29),o(7," There are no buyer records available at the moment. "),t()()()())}function Ne(m,r){m&1&&T(0)}function Le(m,r){if(m&1&&(i(0,"form",30)(1,"div")(2,"c-input-group")(3,"span",31),o(4,"Buyer Name"),t(),p(5,"input",32),t(),i(6,"c-form-feedback",33),o(7,"Please provide a valid Buyer."),t()(),i(8,"div")(9,"c-input-group")(10,"span",31),o(11,"Country"),t(),p(12,"input",34),t(),i(13,"c-form-feedback",33),o(14,"Please provide a valid Country."),t()(),i(15,"div")(16,"c-input-group")(17,"span",31),o(18,"Contact Details"),t(),p(19,"input",35),t(),i(20,"c-form-feedback",33),o(21,"Please provide a valid Contact Details."),t()()()),m&2){let e=s();c("formGroup",e.buyerForm)("validated",e.customStylesValidated),l(6),c("valid",!1),l(7),c("valid",!1),l(7),c("valid",!1)}}var u=class u{constructor(r,e,a){this.router=r;this.fb=e;this.api=a;this.visible=!0;this.editTooltip="Edit";this.customStylesValidated=!1;this.popupIdentity=0;this.page=1;this.pageSize=5;this.buyersList=[];this.profileList=[];this.filterBuyer="";this.buyerForm=this.fb.group({buyer:[null,[x.required]],country:[null,[x.required]],contact:[null,[x.required]]})}openPopup(r){r=="Add"?this.popupIdentity=1:this.popupIdentity=2}ngOnInit(){this.listBuyers()}listBuyers(){this.api.GetApi(`/mastersapi/buyer-master-filter?buyer=${this.filterBuyer}`).subscribe(r=>{this.buyersList=r.buyers})}callEdit(r){this.editId=r.id,this.buyerForm.controls.buyer.setValue(r.buyer),this.buyerForm.controls.country.setValue(r.country),this.buyerForm.controls.contact.setValue(r.contactDetails)}saveUpdate(r){if(!this.buyerForm.invalid)if(r===1)this.api.PostApiWithHeader("/mastersapi/buyer-master",this.buyerForm.value).subscribe(e=>{e.success===!0?(this.listBuyers(),this.closeBtn.nativeElement.click(),this.buyerForm.reset(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")});else{let e=E({id:this.editId},this.buyerForm.value);this.api.PostApiWithHeader("/mastersapi/buyer-master",e).subscribe(a=>{a.success===!0?(this.closeBtn.nativeElement.click(),this.buyerForm.reset(),this.listBuyers(),this.api.showSuccess("Updated Successfully !!! ","Updated")):this.api.showError("Not Updated","Error")})}}};u.\u0275fac=function(e){return new(e||u)(b(H),b(be),b(_e))},u.\u0275cmp=F({type:u,selectors:[["app-buyer"]],viewQuery:function(e,a){if(e&1&&(S(Fe,5),S(Te,5)),e&2){let n;D(n=B())&&(a.scrollableLongContentModal=n.first),D(n=B())&&(a.closeBtn=n.first)}},decls:28,vars:8,consts:[["scrollableLongContentModal",""],["closeBtn",""],["longContent",""],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click","cModalToggle"],["style","overflow-x: auto; width: 100%;","class","table-responsive",4,"ngIf"],["class","d-flex justify-content-center align-items-center","style","height: 100vh; width: 100%;",4,"ngIf"],["backdrop","static","id","scrollableLongContentModal","scrollable",""],["cModalTitle",""],["cButtonClose","",3,"cModalToggle"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"cModalToggle"],["cButton","","color","primary",3,"click"],[1,"table-responsive",2,"overflow-x","auto","width","100%"],["bordered","","cTable","",1,"table","table-hover",3,"striped"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[3,"pageChange","page","boundaryLinks","maxSize","pageSize","collectionSize"],["scope","row",1,"text-center"],[1,"text-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click","cModalToggle"],[1,"cil-pencil"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100vh","width","100%"],[2,"max-width","400px","text-align","center"],["cCardImg","top","src","../../../../assets/No data-amico.svg","alt","No Data"],["cCardTitle",""],["cCardText",""],["cForm","",2,"display","flex","flex-direction","column","gap","5vh",3,"formGroup","validated"],["cInputGroupText",""],["aria-label","Buyer Name","cFormControl","","formControlName","buyer"],[3,"valid"],["aria-label","Country","cFormControl","","formControlName","country"],["aria-label","Contact Details","cFormControl","","formControlName","contact"]],template:function(e,a){if(e&1){let n=C();i(0,"c-header")(1,"c-container",3)(2,"c-header-brand",4),o(3,"Buyer Master"),t(),i(4,"c-header-nav",5)(5,"c-nav-item")(6,"button",6),h("click",function(){return y(n),v(a.openPopup("Add"))}),o(7,"Add Buyer"),t()()()(),p(8,"c-header-divider"),i(9,"c-container",3),f(10,Ie,16,7,"div",7)(11,Me,8,0,"div",8),t()(),i(12,"c-modal",9,0)(14,"c-modal-header")(15,"h5",10),o(16),t(),p(17,"button",11,1),t(),i(19,"c-modal-body"),f(20,Ne,1,0,"ng-container",12),t(),i(21,"c-modal-footer")(22,"button",13),o(23," Close "),t(),i(24,"button",14),h("click",function(){return y(n),v(a.saveUpdate(a.popupIdentity))}),o(25),t()()(),f(26,Le,22,5,"ng-template",null,2,L)}if(e&2){let n=_(13),d=_(27);l(6),c("cModalToggle",n.id),l(4),c("ngIf",((a.buyersList==null?null:a.buyersList.length)||0)>0),l(),c("ngIf",((a.buyersList==null?null:a.buyersList.length)||0)===0),l(5),w(" ",a.popupIdentity==1?"Add New Buyer":"Edit Buyer"),l(),c("cModalToggle",n.id),l(3),c("ngTemplateOutlet",d),l(2),c("cModalToggle",n.id),l(3),g(a.popupIdentity==1?"Save changes":"Update changes")}},dependencies:[Q,U,q,re,Z,ee,te,ie,z,Ce,ve,se,ue,ye,Y,oe,G,j,O,pe,R,ne,de,le,ce,me,ae,A,he,fe,ge,K,X,$,P,k,V,De,Se,xe,Be,W,J],encapsulation:2});var Ee=u;export{Ee as BuyerComponent};
