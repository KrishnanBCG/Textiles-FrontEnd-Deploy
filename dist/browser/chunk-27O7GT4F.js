import{a as ue}from"./chunk-MUOSKTGI.js";import"./chunk-RXRC2IAU.js";import{c as ie,e as c,f as oe,g as re,k as ne,l as le,o as ae,p as me,q as se,r as pe,t as de,v as ce}from"./chunk-DO327FSU.js";import{$ as H,A as k,B as L,Ga as te,Z as P,aa as R,ba as O,ca as G,fa as q,ga as Q,ha as j,ia as $,la as W,qa as z,ra as J,sa as K,ta as X,ua as Y,va as Z,wa as ee}from"./chunk-W7O4NI74.js";import"./chunk-RXWOWTKC.js";import{d as N,g as V,j as A,y as B,z as U}from"./chunk-H4Z643GT.js";import{Ac as o,Bc as d,Cc as w,Rb as m,Sb as t,Tb as e,Ub as p,Vc as I,Za as n,_b as F,cc as x,ic as E,ka as f,kb as g,la as h,lc as y,pb as S,pc as M,qc as T,rc as D,vb as C,vc as b}from"./chunk-G573C4CW.js";import{a as _}from"./chunk-AQY5CCQG.js";var Ce=["closeBtn"];function fe(s,i){if(s&1){let r=x();t(0,"tr")(1,"th",17),o(2),e(),t(3,"td"),o(4),e(),t(5,"td"),o(6),e(),t(7,"td"),o(8),e(),t(9,"td"),o(10),e(),t(11,"td")(12,"button",18),E("click",function(){let a=f(r).$implicit,u=y();return u.openPopup("Edit"),h(u.callEdit(a))}),p(13,"i",19),e()()()}if(s&2){let r=i.$implicit,l=i.index;y();let a=b(29);n(2),d(l+1),n(2),d(r.employeeCode),n(2),d(r.name),n(2),d(r.email),n(2),d(r.phone),n(2),m("cModalToggle",a.id)}}function he(s,i){s&1&&F(0)}function ge(s,i){if(s&1&&(t(0,"option",30),o(1),e()),s&2){let r=i.$implicit;m("value",r.id),n(),d(r.name)}}function Ee(s,i){if(s&1&&(t(0,"div",20)(1,"div")(2,"c-input-group")(3,"span",21),o(4,"Employee Code"),e(),p(5,"input",22),e()(),t(6,"div")(7,"c-input-group")(8,"span",21),o(9,"Name"),e(),p(10,"input",23),e()(),t(11,"div")(12,"c-input-group")(13,"span",21),o(14,"Email"),e(),p(15,"input",24),e()(),t(16,"div")(17,"c-input-group")(18,"span",21),o(19,"Phone"),e(),p(20,"input",25),e()(),t(21,"div")(22,"c-input-group")(23,"span",21),o(24,"Address"),e(),p(25,"textarea",26),e()(),t(26,"div")(27,"c-input-group")(28,"span",21),o(29,"Role"),e(),t(30,"select",27)(31,"option"),o(32,"Select Profile"),e(),C(33,ge,2,2,"option",28),e()()(),t(34,"div")(35,"c-input-group")(36,"span",21),o(37,"Password"),e(),p(38,"input",29),e()()()),s&2){let r=y();m("formGroup",r.userForm),n(33),m("ngForOf",r.rolesList)}}var v=class v{constructor(i,r,l){this.router=i;this.fb=r;this.api=l;this.visible=!0;this.editTooltip="Edit";this.popupIdentity=0;this.rolesList=[];this.empList=[];this.userForm=this.fb.group({employeeCode:[null,[c.required]],name:[null,[c.required]],email:[null,[c.required]],phone:[null,[c.required]],password:[null,[c.required]],role:[null,[c.required]],address:[null,[c.required]]})}openPopup(i){i=="Add"?this.popupIdentity=1:this.popupIdentity=2}ngOnInit(){this.listEmp(),this.listRoles()}listRoles(){this.api.GetApi("/roleapi/roles").subscribe(i=>{this.rolesList=i.roles})}listEmp(){this.api.GetApi("/employeeapi/employee").subscribe(i=>{this.empList=i.employees})}callEdit(i){this.editId=i.id,this.userForm.controls.employeeCode.setValue(i.employeeCode),this.userForm.controls.name.setValue(i.name),this.userForm.controls.email.setValue(i.email),this.userForm.controls.phone.setValue(i.phone),this.userForm.controls.password.setValue(null),this.userForm.controls.role.setValue(i.roleId),this.userForm.controls.address.setValue(i.address)}saveUpdate(i){if(i===1)this.api.PostApiWithHeader("/employeeapi/employee",this.userForm.value).subscribe(r=>{r.success===!0?(this.closeBtn.nativeElement.click(),this.listEmp(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")});else{let r=_({id:this.editId},this.userForm.value);this.api.PostApiWithHeader("/employeeapi/employee",r).subscribe(l=>{l.success===!0?(this.listEmp(),this.closeBtn.nativeElement.click(),this.api.showSuccess("Updated Successfully !!! ","Updated")):this.api.showError("Not Updated","Error")})}}};v.\u0275fac=function(r){return new(r||v)(g(B),g(de),g(ue))},v.\u0275cmp=S({type:v,selectors:[["app-users-master"]],viewQuery:function(r,l){if(r&1&&M(Ce,5),r&2){let a;T(a=D())&&(l.closeBtn=a.first)}},decls:44,vars:8,consts:[["scrollableLongContentModal",""],["closeBtn",""],["longContent",""],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click","cModalToggle"],[2,"overflow-x","auto","width","100%"],["cTable","","color","success",3,"striped"],["scope","col"],[4,"ngFor","ngForOf"],["backdrop","static","id","scrollableLongContentModal","scrollable",""],["cModalTitle",""],["cButtonClose","",3,"cModalToggle"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"cModalToggle"],["cButton","","color","primary",3,"click"],["scope","row"],[1,"btn","btn-sm","btn-outline-primary",3,"click","cModalToggle"],[1,"cil-pencil"],[2,"display","flex","flex-direction","column","gap","5vh",3,"formGroup"],["cInputGroupText",""],["aria-label","Employee Code","cFormControl","","formControlName","employeeCode"],["aria-label","Name","cFormControl","","formControlName","name"],["aria-label","Email","cFormControl","","formControlName","email"],["aria-label","Phone","cFormControl","","type","number","formControlName","phone"],["aria-label","Address","cFormControl","","formControlName","address",1,"form-control"],["aria-label","Profile","cSelect","","formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Password","cFormControl","","type","password","formControlName","password"],[3,"value"]],template:function(r,l){if(r&1){let a=x();t(0,"c-header")(1,"c-container",3)(2,"c-header-brand",4),o(3,"Role Master"),e(),t(4,"c-header-nav",5)(5,"c-nav-item")(6,"button",6),E("click",function(){return f(a),h(l.openPopup("Add"))}),o(7,"Add User"),e()()()(),p(8,"c-header-divider"),t(9,"c-container",3)(10,"div",7)(11,"table",8)(12,"thead")(13,"tr")(14,"th",9),o(15,"#"),e(),t(16,"th",9),o(17,"Emp Code"),e(),t(18,"th",9),o(19,"Name"),e(),t(20,"th",9),o(21,"Email"),e(),t(22,"th",9),o(23,"Phone"),e(),t(24,"th",9),o(25,"Action"),e()()(),t(26,"tbody"),C(27,fe,14,6,"tr",10),e()()()()(),t(28,"c-modal",11,0)(30,"c-modal-header")(31,"h5",12),o(32),e(),p(33,"button",13,1),e(),t(35,"c-modal-body"),C(36,he,1,0,"ng-container",14),e(),t(37,"c-modal-footer")(38,"button",15),o(39," Close "),e(),t(40,"button",16),E("click",function(){return f(a),h(l.saveUpdate(l.popupIdentity))}),o(41),e()()(),C(42,Ee,39,2,"ng-template",null,2,I)}if(r&2){let a=b(29),u=b(43);n(6),m("cModalToggle",a.id),n(5),m("striped",!0),n(16),m("ngForOf",l.empList),n(5),w(" ",l.popupIdentity==1?"Add New User":"Edit User"),n(),m("cModalToggle",a.id),n(3),m("ngTemplateOutlet",u),n(2),m("cModalToggle",a.id),n(3),d(l.popupIdentity==1?"Save changes":"Update changes")}},dependencies:[W,q,Q,j,$,A,N,V,U,G,z,k,te,L,J,ee,X,Y,Z,K,ce,se,pe,ie,ne,me,oe,re,le,ae,H,R,O,P],encapsulation:2});var ve=v;export{ve as UsersMasterComponent};
