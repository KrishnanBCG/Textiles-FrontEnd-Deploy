import{a as he,d as _e,e as be}from"./chunk-3CQKJCQS.js";import{a as fe}from"./chunk-LBW5AWSH.js";import"./chunk-UZYPASHM.js";import{c as ce,e as C,f as se,g as pe,l as de,o as me,p as ue,q as Ce,r as ge,t as ye,v as ve}from"./chunk-SVEOW7D2.js";import{$ as W,A as z,B as O,Da as ae,G as R,H as q,X as j,Z as Q,_ as U,aa as $,da as J,ea as K,fa as X,ga as Y,ia as Z,na as ee,oa as te,pa as oe,qa as ie,ra as re,sa as ne,ta as le}from"./chunk-37SJZKTR.js";import"./chunk-CZ6YIH4Q.js";import{A as G,d as V,e as A,g as k,k as H,z as P}from"./chunk-25OLHFVP.js";import{$b as _,Lc as B,Ob as p,Pb as o,Qb as t,Rb as d,Ub as I,Vb as h,Xa as a,bb as b,bc as u,fc as S,gc as E,hb as D,hc as T,ja as g,ka as y,lc as x,nb as v,qc as r,rc as m,sc as F,uc as M,vc as L,wc as N}from"./chunk-AONHZWD2.js";import{a as w}from"./chunk-AQY5CCQG.js";var Se=["scrollableLongContentModal"],Ee=["closeBtn"];function Te(c,i){if(c&1){let e=h();o(0,"tr")(1,"th",21),r(2),t(),o(3,"td",22),r(4),t(),o(5,"td",22),r(6),t(),o(7,"td",22),r(8),t(),o(9,"td",22),r(10),t(),o(11,"td",22),r(12),t(),o(13,"td",22)(14,"button",23),_("click",function(){let n=g(e).$implicit,s=u(2);return s.openPopup("Edit"),y(s.callEdit(n))}),d(15,"i",24),t()()()}if(c&2){let e=i.$implicit,l=i.index,n=u(2),s=x(13);a(2),m((n.page-1)*n.pageSize+l+1),a(2),m(e.color),a(2),m(e.color_code),a(2),m(e.buyer),a(2),m(e.dia_correction),a(2),m(e.dye_process_loss),a(2),p("cModalToggle",s.id)}}function we(c,i){if(c&1){let e=h();o(0,"div",15)(1,"table",16)(2,"thead")(3,"tr")(4,"th",17),r(5,"#"),t(),o(6,"th",17),r(7,"Color Name"),t(),o(8,"th",17),r(9,"Color Code"),t(),o(10,"th",17),r(11,"Buyer Name"),t(),o(12,"th",17),r(13,"Dia Correction"),t(),o(14,"th",17),r(15,"Dye Process Loss"),t(),o(16,"th",17),r(17,"Action"),t()()(),o(18,"tbody"),v(19,Te,16,7,"tr",18),t()(),o(20,"div",19)(21,"ngb-pagination",20),N("pageChange",function(n){g(e);let s=u();return L(s.page,n)||(s.page=n),y(n)}),t()()()}if(c&2){let e=u();a(),p("striped",!0),a(18),p("ngForOf",e.colorList.slice((e.page-1)*e.pageSize,e.page*e.pageSize)),a(2),M("page",e.page),p("boundaryLinks",!0)("maxSize",3)("pageSize",e.pageSize)("collectionSize",e.colorList.length)}}function De(c,i){c&1&&(o(0,"div",25)(1,"c-card",26),d(2,"img",27),o(3,"c-card-body")(4,"h5",28),r(5,"No Data Found"),t(),o(6,"p",29),r(7," There are no color records available at the moment. "),t()()()())}function Ie(c,i){c&1&&I(0)}function Fe(c,i){if(c&1&&(o(0,"option",38),r(1),t()),c&2){let e=i.$implicit;p("value",e.buyer),a(),m(e.buyer)}}function Me(c,i){if(c&1){let e=h();o(0,"div",30)(1,"div")(2,"c-input-group")(3,"span",31),r(4,"Color Name"),t(),d(5,"input",32),t()(),o(6,"div")(7,"c-input-group")(8,"span",31),r(9,"Color Code"),t(),d(10,"input",33),t()(),o(11,"div")(12,"c-input-group")(13,"span",31),r(14,"Buyer"),t(),o(15,"select",34),_("change",function(n){g(e);let s=u();return y(s.getbuyerId(n))}),o(16,"option"),r(17,"Select Buyer"),t(),v(18,Fe,2,2,"option",35),t()()(),o(19,"div")(20,"c-input-group")(21,"span",31),r(22,"Dia Correction"),t(),d(23,"input",36),t()(),o(24,"div")(25,"c-input-group")(26,"span",31),r(27,"Dye Process Loss"),t(),d(28,"input",37),t()()()}if(c&2){let e=u();p("formGroup",e.colorForm),a(18),p("ngForOf",e.buyersList)}}var f=class f{constructor(i,e,l){this.router=i;this.fb=e;this.api=l;this.visible=!0;this.editTooltip="Edit";this.popupIdentity=0;this.page=1;this.pageSize=5;this.buyersList=[];this.profileList=[];this.yarnTypeList=[];this.fabricTypeList=[];this.dyeTypeList=[];this.colorList=[];this.filterColor="";this.colorForm=this.fb.group({color:[null,C.required],colorcode:[null,C.required],buyer:[null,C.required],buyerId:[null,C.required],diacorrection:[null,C.required],dyeprocessloss:[null,C.required]})}openPopup(i){i=="Add"?this.popupIdentity=1:this.popupIdentity=2}ngOnInit(){this.listBuyers(),this.listColor()}listColor(){this.api.GetApi(`/mastersapi/color-master-filter?color=${this.filterColor}&`).subscribe(i=>{this.colorList=i.colors})}listBuyers(){this.api.GetApi("/mastersapi/drop-buyer-Master").subscribe(i=>{this.buyersList=i.buyer})}getbuyerId(i){let l=i.target.value;this.api.GetApi(`/mastersapi/drop-buyerId-Master?buyer='${l}'`).subscribe(n=>{let s=n.buyer[0].id;this.colorForm.controls.buyerId.setValue(s)})}callEdit(i){this.editId=i.id,this.colorForm.controls.color.setValue(i.color),this.colorForm.controls.colorcode.setValue(i.color_code),this.colorForm.controls.diacorrection.setValue(i.dia_correction),this.colorForm.controls.buyer.setValue(i.buyer),this.colorForm.controls.dyeprocessloss.setValue(i.dye_process_loss),this.colorForm.controls.buyerId.setValue(i.buyer_id)}saveUpdate(i){if(!this.colorForm.invalid)if(i===1)this.api.PostApiWithHeader("/mastersapi/color-master",this.colorForm.value).subscribe(e=>{e.success===!0?(this.listColor(),this.closeBtn.nativeElement.click(),this.colorForm.reset(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")});else{let e=w({id:this.editId},this.colorForm.value);this.api.PostApiWithHeader("/mastersapi/color-master",e).subscribe(l=>{l.success===!0?(this.closeBtn.nativeElement.click(),this.colorForm.reset(),this.listColor(),this.api.showSuccess("Updated Successfully !!! ","Updated")):this.api.showError("Not Updated","Error")})}}};f.\u0275fac=function(e){return new(e||f)(b(P),b(ye),b(fe))},f.\u0275cmp=D({type:f,selectors:[["app-color"]],viewQuery:function(e,l){if(e&1&&(S(Se,5),S(Ee,5)),e&2){let n;E(n=T())&&(l.scrollableLongContentModal=n.first),E(n=T())&&(l.closeBtn=n.first)}},decls:28,vars:8,consts:[["scrollableLongContentModal",""],["closeBtn",""],["longContent",""],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click","cModalToggle"],["style","overflow-x: auto; width: 100%;",4,"ngIf"],["class","d-flex justify-content-center align-items-center","style","height: 100vh; width: 100%;",4,"ngIf"],["backdrop","static","id","scrollableLongContentModal","scrollable",""],["cModalTitle",""],["cButtonClose","",3,"cModalToggle"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"cModalToggle"],["cButton","","color","primary",3,"click"],[2,"overflow-x","auto","width","100%"],["bordered","","cTable","",1,"table","table-hover",3,"striped"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[3,"pageChange","page","boundaryLinks","maxSize","pageSize","collectionSize"],["scope","row",1,"text-center"],[1,"text-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click","cModalToggle"],[1,"cil-pencil"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100vh","width","100%"],[2,"max-width","400px","text-align","center"],["cCardImg","top","src","../../../../assets/No data-amico.svg","alt","No Data"],["cCardTitle",""],["cCardText",""],[2,"display","flex","flex-direction","column","gap","5vh",3,"formGroup"],["cInputGroupText",""],["aria-label","Color Name","cFormControl","","formControlName","color"],["aria-label","Color Code","cFormControl","","formControlName","colorcode"],["aria-label","Buyer","cSelect","","formControlName","buyer",3,"change"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Dia Correction","cFormControl","","formControlName","diacorrection"],["aria-label","Dye Process Loss","cFormControl","","formControlName","dyeprocessloss"],[3,"value"]],template:function(e,l){if(e&1){let n=h();o(0,"c-header")(1,"c-container",3)(2,"c-header-brand",4),r(3,"Color Master"),t(),o(4,"c-header-nav",5)(5,"c-nav-item")(6,"button",6),_("click",function(){return g(n),y(l.openPopup("Add"))}),r(7,"Add Color"),t()()()(),d(8,"c-header-divider"),o(9,"c-container",3),v(10,we,22,7,"div",7)(11,De,8,0,"div",8),t()(),o(12,"c-modal",9,0)(14,"c-modal-header")(15,"h5",10),r(16),t(),d(17,"button",11,1),t(),o(19,"c-modal-body"),v(20,Ie,1,0,"ng-container",12),t(),o(21,"c-modal-footer")(22,"button",13),r(23," Close "),t(),o(24,"button",14),_("click",function(){return g(n),y(l.saveUpdate(l.popupIdentity))}),r(25),t()()(),v(26,Me,29,2,"ng-template",null,2,B)}if(e&2){let n=x(13),s=x(27);a(6),p("cModalToggle",n.id),a(4),p("ngIf",((l.colorList==null?null:l.colorList.length)||0)>0),a(),p("ngIf",((l.colorList==null?null:l.colorList.length)||0)===0),a(5),F(" ",l.popupIdentity==1?"Add New Color":"Edit Color"),a(),p("cModalToggle",n.id),a(3),p("ngTemplateOutlet",s),a(2),p("cModalToggle",n.id),a(3),m(l.popupIdentity==1?"Save changes":"Update changes")}},dependencies:[Z,J,K,X,Y,G,$,ee,z,q,R,ae,O,te,le,ie,re,ne,oe,k,ve,Ce,ge,ce,ue,se,pe,de,me,Q,U,W,j,H,V,A,be,_e,he],encapsulation:2});var xe=f;export{xe as ColorComponent};
