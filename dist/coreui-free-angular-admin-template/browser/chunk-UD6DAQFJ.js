import{a as $e}from"./chunk-YVX2SLF2.js";import{a as Ge,b as Ke}from"./chunk-DJFYXFDX.js";import{b as Le}from"./chunk-VTW2WYXB.js";import{b as Ae}from"./chunk-MV7IGZFE.js";import{a as Oe,c as we,e as Ne}from"./chunk-3CQKJCQS.js";import{Qa as ye}from"./chunk-37HNLNO6.js";import"./chunk-GR7IJ7CP.js";import{a as ze}from"./chunk-LBW5AWSH.js";import"./chunk-UZYPASHM.js";import{c as fe,e as _,f as Fe,g as ve,h as be,k as xe,l as Ce,m as he,n as Se,o as Ie,p as Be,q as Te,r as ke,t as De,u as Ve,v as Ee}from"./chunk-SVEOW7D2.js";import{$ as ce,A as oe,X as re,Z as ae,_ as le,aa as pe,da as me,ea as se,fa as _e,ga as de,ia as ue,na as ge,u as Q,v as Z,w as ee,x as te,y as ie,z as ne}from"./chunk-37SJZKTR.js";import"./chunk-CZ6YIH4Q.js";import{A as W,d as H,e as j,k as U,x as X,z as J}from"./chunk-25OLHFVP.js";import{$b as C,Ac as S,Ob as c,Pb as r,Qb as n,Rb as f,Vb as I,Xa as a,bb as V,bc as p,hb as Y,ja as b,ka as x,la as P,lc as N,nb as v,qc as l,rc as A,sc as d}from"./chunk-AONHZWD2.js";import"./chunk-AQY5CCQG.js";function Pe(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.buyer)),a(),A(e.buyer)}}function Ye(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.orderNo)),a(),A(e.orderNo)}}function He(t,o){if(t&1){let e=I();r(0,"div",8)(1,"c-input-group")(2,"span",9),l(3,"Order No"),n(),r(4,"select",19),C("change",function(){b(e);let m=p();return x(m.loadStyle())}),r(5,"option"),l(6,"Select"),n(),v(7,Ye,2,3,"option",11),n()()()}if(t&2){let e=p();a(4),c("disabled",e.items.length>0),a(3),c("ngForOf",e.listOrderNo)}}function je(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("Style : ",(e=i.get("Style"))==null?null:e.value)}}function Ue(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("Color : ",(e=i.get("Color"))==null?null:e.value)}}function Xe(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("Size : ",(e=i.get("Size"))==null?null:e.value)}}function Je(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("FSize : ",(e=i.get("FSize"))==null?null:e.value)}}function We(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("FabType : ",(e=i.get("FabType"))==null?null:e.value)}}function Qe(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("FabDia : ",(e=i.get("FabDia"))==null?null:e.value)}}function Ze(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("FabGsm : ",(e=i.get("FabGsm"))==null?null:e.value)}}function et(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("KnitSL : ",(e=i.get("KnitSL"))==null?null:e.value)}}function tt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("YarnType : ",(e=i.get("YarnType"))==null?null:e.value)}}function it(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("FabType : ",(e=i.get("FabType"))==null?null:e.value)}}function nt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("DyeType : ",(e=i.get("dyetype"))==null?null:e.value)}}function ot(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("SpinFty : ",(e=i.get("SpinFty"))==null?null:e.value)}}function rt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("KnitFty : ",(e=i.get("KnitFty"))==null?null:e.value)}}function at(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("DyeinFty : ",(e=i.get("DyeinFty"))==null?null:e.value)}}function lt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("OrderPcs : ",(e=i.get("OrderPcs"))==null?null:e.value)}}function ct(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("OrderFOBRate : ",(e=i.get("OrderFOBRate"))==null?null:e.value)}}function pt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("KnitRate : ",(e=i.get("KnitRate"))==null?null:e.value)}}function mt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("DyeRate : ",(e=i.get("DyeRate"))==null?null:e.value)}}function st(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("YarnKg : ",(e=i.get("YarnKg"))==null?null:e.value)}}function _t(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("GreigeKg : ",(e=i.get("GreigeKg"))==null?null:e.value)}}function dt(t,o){if(t&1&&(r(0,"mat-chip"),l(1),n()),t&2){let e,i=p(2).$implicit;a(),d("FinishKg : ",(e=i.get("FinishKg"))==null?null:e.value)}}function ut(t,o){if(t&1){let e=I();r(0,"button",23),C("click",function(){b(e),p();let m=N(1);return x(m.toggleItem())}),r(1,"div")(2,"div")(3,"span"),l(4),n()(),r(5,"div"),v(6,je,2,1,"mat-chip",24)(7,Ue,2,1,"mat-chip",24)(8,Xe,2,1,"mat-chip",24)(9,Je,2,1,"mat-chip",24)(10,We,2,1,"mat-chip",24)(11,Qe,2,1,"mat-chip",24)(12,Ze,2,1,"mat-chip",24)(13,et,2,1,"mat-chip",24)(14,tt,2,1,"mat-chip",24)(15,it,2,1,"mat-chip",24)(16,nt,2,1,"mat-chip",24)(17,ot,2,1,"mat-chip",24)(18,rt,2,1,"mat-chip",24)(19,at,2,1,"mat-chip",24)(20,lt,2,1,"mat-chip",24)(21,ct,2,1,"mat-chip",24)(22,pt,2,1,"mat-chip",24)(23,mt,2,1,"mat-chip",24)(24,st,2,1,"mat-chip",24)(25,_t,2,1,"mat-chip",24)(26,dt,2,1,"mat-chip",24),n()()()}if(t&2){let e,i,m,s,F,h,B,E,D,z,O,u,w,y,T,L,G,K,$,R,q,M=p(),g=M.$implicit,qe=M.index,Me=N(1);c("collapsed",!Me.visible),a(4),d("Fabric Booking Details ",qe+1),a(2),c("ngIf",(e=g.get("Style"))==null?null:e.value),a(),c("ngIf",(i=g.get("Color"))==null?null:i.value),a(),c("ngIf",(m=g.get("Size"))==null?null:m.value),a(),c("ngIf",(s=g.get("FSize"))==null?null:s.value),a(),c("ngIf",(F=g.get("FabType"))==null?null:F.value),a(),c("ngIf",(h=g.get("FabDia"))==null?null:h.value),a(),c("ngIf",(B=g.get("FabGsm"))==null?null:B.value),a(),c("ngIf",(E=g.get("KnitSL"))==null?null:E.value),a(),c("ngIf",(D=g.get("YarnType"))==null?null:D.value),a(),c("ngIf",(z=g.get("FabType"))==null?null:z.value),a(),c("ngIf",(O=g.get("dyetype"))==null?null:O.value),a(),c("ngIf",(u=g.get("SpinFty"))==null?null:u.value),a(),c("ngIf",(w=g.get("KnitFty"))==null?null:w.value),a(),c("ngIf",(y=g.get("DyeinFty"))==null?null:y.value),a(),c("ngIf",(T=g.get("OrderPcs"))==null?null:T.value),a(),c("ngIf",(L=g.get("OrderFOBRate"))==null?null:L.value),a(),c("ngIf",(G=g.get("KnitRate"))==null?null:G.value),a(),c("ngIf",(K=g.get("DyeRate"))==null?null:K.value),a(),c("ngIf",($=g.get("YarnKg"))==null?null:$.value),a(),c("ngIf",(R=g.get("GreigeKg"))==null?null:R.value),a(),c("ngIf",(q=g.get("FinishKg"))==null?null:q.value)}}function gt(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.style)),a(),d(" ",e.style)}}function yt(t,o){if(t&1){let e=I();r(0,"div",8)(1,"c-input-group")(2,"span",9),l(3,"Style"),n(),r(4,"select",47),C("change",function(){b(e);let m=p(2).index,s=p();return x(s.loadColor(m))}),r(5,"option"),l(6,"Select"),n(),v(7,gt,2,3,"option",11),n()()()}if(t&2){let e=p(3);a(7),c("ngForOf",e.listStyle)}}function ft(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.color)),a(),d(" ",e.color)}}function Ft(t,o){if(t&1){let e=I();r(0,"div",8)(1,"c-input-group")(2,"span",9),l(3,"Color"),n(),r(4,"select",48),C("change",function(){b(e);let m=p(2).index,s=p();return x(s.loadFSize(m))}),r(5,"option"),l(6,"Select"),n(),v(7,ft,2,3,"option",11),n()()()}if(t&2){let e,i=p(2).$implicit;a(7),c("ngForOf",(e=i.get("colorList"))==null?null:e.value)}}function vt(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.concatSize)),a(),d(" ",e.concatSize)}}function bt(t,o){if(t&1){let e=I();r(0,"div",8)(1,"c-input-group")(2,"span",9),l(3,"FSize"),n(),r(4,"select",49),C("change",function(){b(e);let m=p(2).index,s=p();return x(s.loadGSize(m))}),r(5,"option"),l(6,"Select"),n(),v(7,vt,2,3,"option",11),n()()()}if(t&2){let e,i=p(2).$implicit;a(7),c("ngForOf",(e=i.get("gsizeList"))==null?null:e.value)}}function xt(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.SpinFtyName)),a(),d(" ",e.SpinFtyName)}}function Ct(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.knitFty)),a(),d(" ",e.knitFty)}}function ht(t,o){if(t&1&&(r(0,"option",18),l(1),n()),t&2){let e=o.$implicit;c("value",S(e.dyeFty)),a(),d(" ",e.dyeFty)}}function St(t,o){if(t&1){let e=I();r(0,"div",25)(1,"div",7),v(2,yt,8,1,"div",12)(3,Ft,8,1,"div",12)(4,bt,8,1,"div",12),n(),r(5,"div",7)(6,"div",8)(7,"c-input-group")(8,"span",9),l(9,"GSize"),n(),f(10,"input",26),n()(),r(11,"div",8)(12,"c-input-group")(13,"span",9),l(14,"Fab Dia"),n(),f(15,"input",27),n()(),r(16,"div",8)(17,"c-input-group")(18,"span",9),l(19,"Fab Gsm"),n(),f(20,"input",28),n()()(),r(21,"div",7)(22,"div",8)(23,"c-input-group")(24,"span",9),l(25,"Knit SL"),n(),f(26,"input",29),n()(),r(27,"div",8)(28,"c-input-group")(29,"span",9),l(30,"Yarn Type"),n(),f(31,"input",30),n()(),r(32,"div",8)(33,"c-input-group")(34,"span",9),l(35,"Fab Type"),n(),f(36,"input",31),n()()(),r(37,"div",7)(38,"div",8)(39,"c-input-group")(40,"span",9),l(41,"Dye Type"),n(),f(42,"input",32),n()(),r(43,"div",8)(44,"c-input-group")(45,"span",9),l(46,"Spin Fty"),n(),r(47,"select",33),C("click",function(){b(e);let m=p(2);return x(m.loadSpinFty())})("change",function(){b(e);let m=p().index,s=p();return x(s.loadSpinFtyId(m))}),r(48,"option"),l(49,"Select"),n(),v(50,xt,2,3,"option",11),n()()(),r(51,"div",8)(52,"c-input-group")(53,"span",9),l(54,"Knit Fty"),n(),r(55,"select",34),C("click",function(){b(e);let m=p(2);return x(m.loadKnitFty())})("change",function(){b(e);let m=p().index,s=p();return x(s.loadKnitFtyId(m))}),r(56,"option"),l(57,"Select"),n(),v(58,Ct,2,3,"option",11),n()()()(),r(59,"div",7)(60,"div",8)(61,"c-input-group")(62,"span",9),l(63,"DyeinFty"),n(),r(64,"select",35),C("click",function(){b(e);let m=p(2);return x(m.loadDyeinFty())})("change",function(){b(e);let m=p().index,s=p();return x(s.loadDyeFtyId(m))}),r(65,"option"),l(66,"Select"),n(),v(67,ht,2,3,"option",11),n()()(),r(68,"div",8)(69,"c-input-group")(70,"span",9),l(71,"OrderPcs"),n(),f(72,"input",36),n()(),r(73,"div",8)(74,"c-input-group")(75,"span",9),l(76,"Order FOB Rate"),n(),f(77,"input",37),n()()(),r(78,"div",7)(79,"div",8)(80,"c-input-group")(81,"span",9),l(82,"KnitRate"),n(),f(83,"input",38),n()(),r(84,"div",8)(85,"c-input-group")(86,"span",9),l(87,"DyeRate"),n(),f(88,"input",39),n()(),r(89,"div",8)(90,"c-input-group")(91,"span",9),l(92,"YarnKg"),n(),f(93,"input",40),n()()(),r(94,"div",7)(95,"div",8)(96,"c-input-group")(97,"span",9),l(98,"GreigeKg"),n(),f(99,"input",41),n()(),r(100,"div",8)(101,"c-input-group")(102,"span",9),l(103,"FinishKg"),n(),f(104,"input",42),n()()(),r(105,"div",43)(106,"div",44)(107,"button",45),C("click",function(){b(e);let m=p().index,s=p();return x(s.removeItem(m))}),P(),f(108,"svg",46),n()()()()}if(t&2){let e=p(2);a(2),c("ngIf",e.listStyle.length>0),a(),c("ngIf",e.listColor.length>0),a(),c("ngIf",e.concatSizeList.length>0),a(46),c("ngForOf",e.spinFtyList),a(8),c("ngForOf",e.knitFtyList),a(9),c("ngForOf",e.dyeFtyList),a(41),c("cIcon",e.icons.cilXCircle)}}function It(t,o){if(t&1&&(r(0,"c-accordion-item",20,0),v(2,ut,27,23,"ng-template",21)(3,St,109,7,"ng-template",22),n()),t&2){let e=o.index;c("visible",!1)("formGroupName",e)}}function Bt(t,o){if(t&1){let e=I();r(0,"div",3)(1,"button",50),C("click",function(){b(e);let m=p();return x(m.saveUpdate())}),l(2,"Save changes"),n()()}}var k=class k{constructor(o,e,i,m){this.router=o;this.fb=e;this.api=i;this.route=m;this.icons={cilXCircle:ye};this.listBuyer=[];this.listOrderNo=[];this.listStyle=[];this.listColor=[];this.concatSizeList=[];this.spinFtyList=[];this.knitFtyList=[];this.dyeFtyList=[];this.selectedBuyer="";this.filterSpinFty="";this.fabricBookingForm=this.fb.group({Buyer:[null,[_.required]],OrderNo:[null,[_.required]],data:this.fb.array([])})}ngOnInit(){this.loadBuyer()}get items(){return this.fabricBookingForm.get("data")}addRow(){let o=this.fb.group({id:[""],poid:["",_.required],polineId:["",_.required],Style:["",_.required],Color:["",_.required],Size:["",_.required],FSize:["",_.required],SizeId:["",_.required],FabType:["",_.required],fabricTypeId:["",_.required],FabDia:["",_.required],FabDiaId:["",_.required],FabGsm:["",_.required],FabGsmId:[0],YarnKg:["",_.required],GreigeKg:["",_.required],YarnType:["",_.required],YarnTypeId:["",_.required],FinishKg:["",_.required],KnitSL:["",_.required],SpinFty:["",_.required],SpinFtyId:["",_.required],KnitFty:["",_.required],KnitFtyId:["",_.required],DyeinFty:["",_.required],DyeinFtyId:["",_.required],dyetype:["",_.required],dyeTypeId:["",_.required],OrderPcs:["",_.required],OrderFOBRate:["",_.required],KnitRate:["",_.required],DyeRate:["",_.required],colorList:[[]],gsizeList:[[]]});this.items.push(o),o.get("OrderPcs")?.valueChanges.subscribe(()=>{this.calculateDiff()}),this.items.length>0&&(this.fabricBookingForm.get("Buyer")?.disable(),this.fabricBookingForm.get("OrderNo")?.disable())}calculateDiff(){this.items.controls.forEach(o=>{let e=o;if(e instanceof be){let i=parseFloat(e.get("OrderPcs")?.value)||0,m=this.finishFabConsumptionVal/((100-this.rejLossVal-this.colorLossVal)/100)*i/12,s=m/((100-parseInt(this.dyeProcessLossVal)-parseInt(this.fabTypeLossVal)-parseInt(this.dyeTypeLossVal))/100),F=parseFloat(m?.toFixed(2)),h=parseFloat(s?.toFixed(2)),B=parseFloat(s?.toFixed(2));e.get("FinishKg")?.setValue(F??0),e.get("GreigeKg")?.setValue(h??0),e.get("YarnKg")?.setValue(B??0)}})}removeItem(o){this.items.removeAt(o),this.items.length===0&&(this.fabricBookingForm.get("Buyer")?.enable(),this.fabricBookingForm.get("OrderNo")?.enable())}loadBuyer(){this.api.GetApi(`/workorderapi/buyer_order_BO?buyer=${this.selectedBuyer}`).subscribe(o=>{this.listBuyer=o.buyers})}loadSpinFty(){this.spinFtyList.length===0&&this.api.GetApi(`/mastersapi/spinFty-master-filter?spinFty=${this.filterSpinFty}`).subscribe(o=>{this.spinFtyList=o.spinFty})}loadSpinFtyId(o){let i=this.fabricBookingForm.get("data").at(o),m=i.get("SpinFty")?.value,s=this.spinFtyList.find(F=>F.SpinFtyName===m);s&&i.get("SpinFtyId")?.setValue(s?.id)}loadKnitFty(){this.knitFtyList.length===0&&this.api.GetApi("/workorderapi/Knit_Fty_BO").subscribe(o=>{this.knitFtyList=o.knitFty})}loadKnitFtyId(o){let i=this.fabricBookingForm.get("data").at(o),m=i.get("KnitFty")?.value,s=this.knitFtyList.find(F=>F.knitFty===m);s&&i.get("KnitFtyId")?.setValue(s?.id)}loadDyeinFty(){this.dyeFtyList.length===0&&this.api.GetApi("/workorderapi/Dyein_Fty_BO").subscribe(o=>{this.dyeFtyList=o.dyeFty})}loadDyeFtyId(o){let i=this.fabricBookingForm.get("data").at(o),m=i.get("DyeinFty")?.value,s=this.dyeFtyList.find(F=>F.dyeFty===m);s&&i.get("DyeinFtyId")?.setValue(s?.id)}loadOrder(){let o=this.fabricBookingForm.get("Buyer")?.value;this.api.GetApi(`/workorderapi/buyer_order_BO?buyer=${o}&`).subscribe(e=>{this.listOrderNo=e.orderNo})}loadStyle(){let o=this.fabricBookingForm.get("Buyer")?.value,e=this.fabricBookingForm.get("OrderNo")?.value;this.api.GetApi(`/workorderapi/order_style_BO?buyer=${o}&order=${e}&`).subscribe(i=>{this.listStyle=i.style})}loadColor(o){let i=this.fabricBookingForm.get("data").at(o),m=this.fabricBookingForm.get("Buyer")?.value,s=this.fabricBookingForm.get("OrderNo")?.value,F=i.get("Style")?.value;this.api.GetApi(`/workorderapi/style_Color_BO?buyer=${m}&order=${s}&style=${F}&`).subscribe(h=>{this.listColor=h.color,i.get("colorList")?.setValue(h.color||[]),i.get("Color")?.setValue("")})}loadFSize(o){let i=this.fabricBookingForm.get("data").at(o),m=i.get("Style")?.value;this.api.GetApi(`/workorderapi/gsize_BO?style=${m}&`).subscribe(s=>{this.concatSizeList=s.Gsize,i.get("gsizeList")?.setValue(s.Gsize||[]),i.get("FSize")?.setValue("")})}loadGSize(o){let i=this.fabricBookingForm.get("data").at(o),m=this.fabricBookingForm.get("Buyer")?.value,s=this.fabricBookingForm.get("OrderNo")?.value,F=i.get("Style")?.value,h=i.get("Color")?.value,B=i.get("FSize")?.value;this.api.GetApi(`/workorderapi/Fsize_Gsize_BO?style=${F}&fsize=${B}&`).subscribe(E=>{let D=E.Gsize[0]?.size;this.fabricBookingForm.get("data").at(o).get("Size")?.setValue(D),this.api.GetApi(`/workorderapi/Combined_Fsize_FabDetails_Gsize_PODetailsLoss_Size_id_BO?buyer=${m}&order=${s}&style=${F}&color=${h}&size=${D}&fsize=${B}&`).subscribe(u=>{this.sizeDetails={OrderFOBRate:u.sizeId[0]?.poRate||"",OrderPcs:u.sizeId[0]?.quantity||"",polineId:u.sizeId[0]?.id||"",poid:u.sizeId[0]?.orderId||"",FSizeFBC:u.sizeId[0]?.concatSize||"",FSizeFBCId:u.sizeId[0]?.sizeId||"",fabricTypeFBC:u.sizeId[0]?.fabricType||"",fabricTypeFBCId:u.sizeId[0]?.fabricTypeId||"",fabricGSMFBC:u.sizeId[0]?.fabricGSM||"",fabricGSMFBCId:u.sizeId[0]?.fabricGSMId||"",yarnTypeFBC:u.sizeId[0]?.yarnType||"",yarnTypeFBCId:u.sizeId[0]?.yarnTypeId||"",finishDiaFBC:u.sizeId[0]?.finishDia||"",finishDiaFBCId:u.sizeId[0]?.styleId||"",styleIdDta:u.sizeId[0]?.styleId||"",dyeTypeFBC:u.sizeId[0]?.dyeType||"",dyeTypeFBCId:u.sizeId[0]?.dyeTypeId||"",colorId:u.sizeId[0]?.colorId||""},this.finishFabConsumptionVal=u.finishfabConsumption[0]?.finishfabConsumption,this.colorLossVal=u.Colorlosses[0]?.popl;let y=this.fabricBookingForm.get("data").at(o);y.get("polineId")?.setValue(this.sizeDetails.polineId),y.get("poid")?.setValue(this.sizeDetails.poid),y.get("FabType")?.setValue(this.sizeDetails.fabricTypeFBC),y.get("fabricTypeId")?.setValue(this.sizeDetails.fabricTypeFBCId),y.get("FabGsm")?.setValue(this.sizeDetails.fabricGSMFBC),y.get("YarnType")?.setValue(this.sizeDetails.yarnTypeFBC),y.get("YarnTypeId")?.setValue(this.sizeDetails.yarnTypeFBCId),y.get("FabDia")?.setValue(this.sizeDetails.finishDiaFBC),y.get("dyetype")?.setValue(this.sizeDetails.dyeTypeFBC),y.get("dyeTypeId")?.setValue(this.sizeDetails.fabricTypeFBCId),y.get("DyeTypeMaster")?.setValue(this.sizeDetails.DyeTypeLossDta),y.get("fabricType")?.setValue(this.sizeDetails.fabTypeLossDta),y.get("SizeId")?.setValue(this.sizeDetails.FSizeFBCId),y.get("FabDiaId")?.setValue(this.sizeDetails.finishDiaFBCId),y.get("OrderPcs")?.setValue(this.sizeDetails.OrderPcs),y.get("OrderFOBRate")?.setValue(this.sizeDetails.OrderFOBRate),this.api.GetApi(`/workorderapi/Combined_RejTypeLoss_ColorLoss_DyeTypeMaster_fabricType_Details_BO?colorid=${this.sizeDetails.colorId}&StyleId=${this.sizeDetails.styleIdDta}&dyeTypeId=${this.sizeDetails.dyeTypeFBCId}&fabTypeId=${this.sizeDetails.fabricTypeFBCId}&`).subscribe(T=>{this.fabTypeLossVal=T.FabricTypeLoss[0].fabpl,this.dyeTypeLossVal=T.DyeTypeLoss[0].dyepl,this.dyeProcessLossVal=T.DyeProcessLoss[0].DyeProcessLoss,this.rejLossVal=T.RejTypeLoss[0].losses,this.calculateDiff()})})})}saveUpdate(){this.fabricBookingForm.valid&&this.api.PostApiWithHeader("/workorderapi/workorder",this.fabricBookingForm.getRawValue()).subscribe(o=>{o.success===!0?(this.fabricBookingForm.reset(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")})}};k.\u0275fac=function(e){return new(e||k)(V(J),V(De),V(ze),V(X))},k.\u0275cmp=Y({type:k,selectors:[["app-fabric-booking"]],decls:26,vars:6,consts:[["item0","cAccordionItem"],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click"],["fluid","",3,"formGroup"],[1,"container"],[1,"row","g-3","mb-4"],[1,"col-sm"],["cInputGroupText",""],["aria-label","Buyer","cSelect","","formControlName","Buyer",3,"change","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","col-sm",4,"ngIf"],[1,"row","g-5"],["formArrayName","data"],[3,"visible","formGroupName",4,"ngFor","ngForOf"],[1,"bg-light","text-center","p-2"],["class","ms-auto",4,"ngIf"],[3,"value"],["aria-label","Order No","cSelect","","formControlName","OrderNo",3,"change","disabled"],[3,"visible","formGroupName"],["cTemplateId","accordionHeaderTemplate"],["cTemplateId","accordionBodyTemplate"],["cAccordionButton","",3,"click","collapsed"],[4,"ngIf"],[1,"accordion-body"],["aria-label","GSize","cFormControl","","readonly","","formControlName","Size"],["aria-label","FabDia","cFormControl","","readonly","","formControlName","FabDia"],["aria-label","FabGsm","cFormControl","","readonly","","formControlName","FabGsm"],["aria-label","KnitSL","cFormControl","","type","number","formControlName","KnitSL"],["aria-label","Yarn Type","cFormControl","","readonly","","formControlName","YarnType"],["aria-label","FabType","cFormControl","","readonly","","formControlName","FabType"],["aria-label","Dye Type","cFormControl","","readonly","","formControlName","dyetype"],["aria-label","Spin Fty","cSelect","","formControlName","SpinFty",3,"click","change"],["aria-label","Knit Fty","cSelect","","formControlName","KnitFty",3,"click","change"],["aria-label","DyeinFty","cSelect","","formControlName","DyeinFty",3,"click","change"],["aria-label","OrderPcs","cFormControl","","type","number","formControlName","OrderPcs"],["aria-label","OrderFOBRate","cFormControl","","type","number","formControlName","OrderFOBRate"],["aria-label","KnitRate","cFormControl","","type","number","formControlName","KnitRate"],["aria-label","DyeRate","cFormControl","","type","number","formControlName","DyeRate"],["aria-label","YarnKg","cFormControl","","type","number","formControlName","YarnKg","readonly",""],["aria-label","GreigeKg","cFormControl","","type","number","formControlName","GreigeKg","readonly",""],["aria-label","FinishKg","cFormControl","","type","number","formControlName","FinishKg","readonly",""],[1,"row","g-3","mb-12"],[1,"text-center"],["cButton","","color","link",2,"color","red",3,"click"],["size","xl","title","List Icon",3,"cIcon"],["aria-label","Style","cSelect","","formControlName","Style",3,"change"],["aria-label","Color","cSelect","","formControlName","Color",3,"change"],["aria-label","FSize","cSelect","","formControlName","FSize",3,"change"],["cButton","","color","primary",3,"click"]],template:function(e,i){e&1&&(r(0,"c-header")(1,"c-container",1)(2,"c-header-brand",2),l(3,"Fabric Booking"),n(),r(4,"c-header-nav",3)(5,"c-nav-item")(6,"button",4),C("click",function(){return i.addRow()}),l(7,"Add"),n()()()(),f(8,"c-header-divider"),r(9,"c-container",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"c-input-group")(14,"span",9),l(15,"Buyer"),n(),r(16,"select",10),C("change",function(){return i.loadOrder()}),r(17,"option"),l(18,"Select"),n(),v(19,Pe,2,3,"option",11),n()()(),v(20,He,8,2,"div",12),n(),r(21,"div",13)(22,"c-accordion",14),v(23,It,4,2,"c-accordion-item",15),n()()()()(),r(24,"footer",16),v(25,Bt,3,0,"div",17),n()),e&2&&(a(9),c("formGroup",i.fabricBookingForm),a(7),c("disabled",i.items.length>0),a(3),c("ngForOf",i.listBuyer),a(),c("ngIf",i.listOrderNo.length>0),a(3),c("ngForOf",i.items.controls),a(2),c("ngIf",i.items.length>0))},dependencies:[ue,me,se,_e,de,$e,W,Z,Q,pe,ge,oe,ee,Ee,Te,ke,fe,xe,Be,Fe,ve,Ce,Ie,he,Se,ae,le,ce,re,U,H,j,Le,Ae,Ne,Oe,we,Ve,te,ie,ne,Ke,Ge],styles:[".scrollable-dropdown[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto}"]});var Re=k;export{Re as FabricBookingComponent};
