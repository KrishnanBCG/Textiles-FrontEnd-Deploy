import{k as x}from"./chunk-25OLHFVP.js";import{$ as d,bb as m,ib as h,kb as f,pb as _}from"./chunk-AONHZWD2.js";var g=class{constructor(){this.change=new _,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(t){return t.id==null&&(t.id=this.DEFAULT_ID),this.instances[t.id]?this.updateInstance(t):(this.instances[t.id]=t,!0)}updateInstance(t){let e=!1;for(let n in this.instances[t.id])t[n]!==this.instances[t.id][n]&&(this.instances[t.id][n]=t[n],e=!0);return e}getCurrentPage(t){return this.instances[t]?this.instances[t].currentPage:1}setCurrentPage(t,e){if(this.instances[t]){let n=this.instances[t],r=Math.ceil(n.totalItems/n.itemsPerPage);e<=r&&1<=e&&(this.instances[t].currentPage=e,this.change.emit(t))}}setTotalItems(t,e){this.instances[t]&&0<=e&&(this.instances[t].totalItems=e,this.change.emit(t))}setItemsPerPage(t,e){this.instances[t]&&(this.instances[t].itemsPerPage=e,this.change.emit(t))}getInstance(t=this.DEFAULT_ID){return this.instances[t]?this.clone(this.instances[t]):{}}clone(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}},b=Number.MAX_SAFE_INTEGER,ie=(()=>{class a{constructor(e){this.service=e,this.state={}}transform(e,n){if(!(e instanceof Array)){let c=n.id||this.service.defaultId();return this.state[c]?this.state[c].slice:e}let r=n.totalItems&&n.totalItems!==e.length,s=this.createInstance(e,n),i=s.id,o,l,p=s.itemsPerPage,C=this.service.register(s);if(!r&&e instanceof Array){if(p=+p||b,o=(s.currentPage-1)*p,l=o+p,this.stateIsIdentical(i,e,o,l))return this.state[i].slice;{let u=e.slice(o,l);return this.saveState(i,e,u,o,l),this.service.change.emit(i),u}}else return C&&this.service.change.emit(i),this.saveState(i,e,e,o,l),e}createInstance(e,n){return this.checkConfig(n),{id:n.id!=null?n.id:this.service.defaultId(),itemsPerPage:+n.itemsPerPage||0,currentPage:+n.currentPage||1,totalItems:+n.totalItems||e.length}}checkConfig(e){let r=["itemsPerPage","currentPage"].filter(s=>!(s in e));if(0<r.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${r.join(", ")}`)}saveState(e,n,r,s,i){this.state[e]={collection:n,size:n.length,slice:r,start:s,end:i}}stateIsIdentical(e,n,r,s){let i=this.state[e];return!i||!(i.size===n.length&&i.start===r&&i.end===s)?!1:i.slice.every((l,p)=>l===n[r+p])}}return a.\u0275fac=function(e){return new(e||a)(m(g,16))},a.\u0275pipe=f({name:"paginate",type:a,pure:!1,standalone:!1}),a})();var ae=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=h({type:a}),a.\u0275inj=d({providers:[g],imports:[[x]]}),a})();export{ie as a,ae as b};
