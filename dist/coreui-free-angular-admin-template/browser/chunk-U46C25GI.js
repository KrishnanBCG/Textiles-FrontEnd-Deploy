import{a as De,b as Se}from"./chunk-VTW2WYXB.js";import{a as be,b as xe}from"./chunk-MV7IGZFE.js";import{a as Te,d as je,e as _e}from"./chunk-3CQKJCQS.js";import{a as ve}from"./chunk-LBW5AWSH.js";import"./chunk-UZYPASHM.js";import{c as me,e as h,f as de,g as ue,k as ye,l as ge,o as he,t as fe,v as Ce}from"./chunk-SVEOW7D2.js";import{$ as K,A as U,B as W,Da as ce,G as z,H as O,X as J,_ as $,aa as X,da as Y,ea as Z,fa as ee,ga as te,ia as ie,na as oe,oa as re,pa as ne,qa as ae,ra as le,sa as pe,ta as se}from"./chunk-37SJZKTR.js";import"./chunk-CZ6YIH4Q.js";import{A as Q,d as L,e as P,g as G,k as H,z as q}from"./chunk-25OLHFVP.js";import{$b as T,Ec as V,Ic as k,Kc as A,Lc as B,Ob as c,Pb as n,Qb as i,Rb as m,Ub as E,Vb as v,Xa as l,bb as _,bc as d,fc as D,gc as S,hb as F,hc as w,ja as u,ka as y,lc as b,nb as C,qc as a,rc as g,sc as I,uc as N,vc as R,wc as M}from"./chunk-AONHZWD2.js";import{a as j,b as x}from"./chunk-AQY5CCQG.js";var Fe=["scrollableLongContentModal"],Ee=["closeBtn"],Ie=p=>({itemsPerPage:5,currentPage:p});function Ne(p,r){if(p&1){let e=v();n(0,"tr")(1,"th",21),a(2),i(),n(3,"td",21),a(4),i(),n(5,"td",21),a(6),i(),n(7,"td",21),a(8),i(),n(9,"td",21)(10,"button",22),T("click",function(){let o=u(e).$implicit,s=d(2);return s.openPopup("Edit"),y(s.callEdit(o))}),m(11,"i",23),i()()()}if(p&2){let e=r.$implicit,t=r.index,o=d(2),s=b(13);l(2),g((o.page-1)*5+t+1),l(2),g(e.rejType),l(2),g(e.rejName),l(2),g(e.losses),l(2),c("cModalToggle",s.id)}}function Re(p,r){if(p&1){let e=v();n(0,"div",15)(1,"table",16)(2,"thead")(3,"tr")(4,"th",17),a(5,"#"),i(),n(6,"th",17),a(7,"Rej Type"),i(),n(8,"th",17),a(9,"Reject Name "),i(),n(10,"th",17),a(11,"Loss %"),i(),n(12,"th",17),a(13,"Action"),i()()(),n(14,"tbody"),C(15,Ne,12,5,"tr",18),k(16,"paginate"),i()(),n(17,"div",19)(18,"ngb-pagination",20),M("pageChange",function(o){u(e);let s=d();return R(s.page,o)||(s.page=o),y(o)}),i()()()}if(p&2){let e=d();l(),c("striped",!0),l(14),c("ngForOf",A(16,6,e.rejtypeData,V(9,Ie,e.page))),l(3),c("boundaryLinks",!0)("maxSize",3)("collectionSize",e.rejtypeData.length),N("page",e.page)}}function Me(p,r){p&1&&(n(0,"div",24)(1,"c-card",25),m(2,"img",26),n(3,"c-card-body")(4,"h5",27),a(5,"No Data Found"),i(),n(6,"p",28),a(7," There are no DyeFty records available at the moment. "),i()()()())}function Ve(p,r){p&1&&E(0)}function ke(p,r){if(p&1){let e=v();n(0,"div",29)(1,"div")(2,"c-input-group")(3,"span",30),a(4,"Color"),i(),n(5,"ng-select",31),T("change",function(o){u(e);let s=d();return y(s.getColor(o))}),i()()(),n(6,"div")(7,"c-input-group")(8,"span",30),a(9,"Rej Type"),i(),m(10,"input",32),i()(),n(11,"div")(12,"c-input-group")(13,"span",30),a(14,"Reject Name"),i(),m(15,"input",33),i()(),n(16,"div")(17,"c-input-group")(18,"span",30),a(19,"Loss %"),i(),m(20,"input",34),i()()()}if(p&2){let e=d();c("formGroup",e.rejTypeForm),l(5),c("items",e.colorDropdata)("multiple",!0)}}var f=class f{constructor(r,e,t){this.router=r;this.fb=e;this.api=t;this.visible=!0;this.page=1;this.editTooltip="Edit";this.popupIdentity=0;this.filterStyle="";this.filterknitfty="";this.rejtypeData=[];this.profileList=[];this.filtermachine="";this.rejtype="";this.selectedColors=[];this.rejTypeForm=this.fb.group({rejType:[null,[h.required]],rejName:[null,[h.required]],colors:[null,[h.required]],data:[null,[h.required]],losses:[null,[h.required]]})}openPopup(r){r=="Add"?(this.rejTypeForm.reset(),this.popupIdentity=1):(this.rejTypeForm.reset(),this.popupIdentity=2)}ngOnInit(){this.listREJ(),this.listColorFn()}listREJ(){this.api.GetApi(`/mastersapi/rejType-master-filter?rejName=${this.rejtype}`).subscribe(r=>{this.rejtypeData=r.rejtype})}listStyleFn(){this.api.GetApi(`/mastersapi/style-master-filter?style=${this.filterStyle}`).subscribe(r=>{this.listStyle=r.styles})}listKniteFtyFn(){this.api.GetApi(`/mastersapi/knitFty-master-filter?knitFty=${this.filterknitfty}`).subscribe(r=>{this.listKnitFty=r.knitFty})}listColorFn(){this.api.GetApi("/mastersapi/drop-color-Master").subscribe(r=>{this.colorDropdata=r.color})}getColor(r){let e=(r||[]).map(t=>Number(t));this.selectedColors=this.colorDropdata.filter(t=>e.includes(t.id)).map(t=>x(j({},t),{lineid:0})),this.rejTypeForm.patchValue({data:this.selectedColors})}callEdit(r){this.editId=r.id,this.api.GetApi(`/mastersapi/rejType-master/${this.editId}`).subscribe(e=>{this.rejtypeDta=e.rejtype,this.rejtypeColorDta=e.rejtype[0].colors.map(o=>({colorId:o.colorId,color:o.color,lineid:o.lineid}));let t=this.rejtypeColorDta.map(o=>o.colorId);this.rejTypeForm.controls.rejType.setValue(this.rejtypeDta[0].rejType),this.rejTypeForm.controls.rejName.setValue(this.rejtypeDta[0].rejName),this.rejTypeForm.controls.losses.setValue(this.rejtypeDta[0].losses),this.rejTypeForm.controls.colors.setValue(t),this.getSelectedColors1()})}getSelectedColors1(){let r=this.rejTypeForm.get("colors")?.value||[];this.selectedColors1=this.colorDropdata.filter(e=>r.includes(e.id)),this.selectedColors2=this.selectedColors1.map(e=>{let t=this.rejtypeColorDta.find(o=>o.colorId===e.id);return x(j({},e),{lineid:t?t.lineid:0})}),this.rejTypeForm.patchValue({data:this.selectedColors2})}saveUpdate(r){if(!this.rejTypeForm.invalid)if(r===1)this.api.PostApiWithHeader("/mastersapi/rejType-master",this.rejTypeForm.value).subscribe(e=>{e.success===!0?(this.listREJ(),this.closeBtn.nativeElement.click(),this.rejTypeForm.reset(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")});else{let e=j({id:this.editId},this.rejTypeForm.value);this.api.PostApiWithHeader("/mastersapi/rejType-master",e).subscribe(t=>{t.success===!0?(this.closeBtn.nativeElement.click(),this.rejTypeForm.reset(),this.listREJ(),this.api.showSuccess("Updated Successfully !!! ","Updated")):this.api.showError("Not Updated","Error")})}}};f.\u0275fac=function(e){return new(e||f)(_(q),_(fe),_(ve))},f.\u0275cmp=F({type:f,selectors:[["app-rej-type"]],viewQuery:function(e,t){if(e&1&&(D(Fe,5),D(Ee,5)),e&2){let o;S(o=w())&&(t.scrollableLongContentModal=o.first),S(o=w())&&(t.closeBtn=o.first)}},decls:28,vars:8,consts:[["scrollableLongContentModal",""],["closeBtn",""],["longContent",""],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click","cModalToggle"],["style","overflow-x: auto; width: 100%;",4,"ngIf"],["class","d-flex justify-content-center align-items-center","style","height: 100vh; width: 100%;",4,"ngIf"],["backdrop","static","id","scrollableLongContentModal","scrollable",""],["cModalTitle",""],["cButtonClose","",3,"cModalToggle"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"cModalToggle"],["cButton","","color","primary",3,"click"],[2,"overflow-x","auto","width","100%"],["bordered","","cTable","",1,"table","table-hover",3,"striped"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[3,"pageChange","boundaryLinks","maxSize","collectionSize","page"],["scope","row",1,"text-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click","cModalToggle"],[1,"cil-pencil"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100vh","width","100%"],[2,"max-width","400px","text-align","center"],["cCardImg","top","src","../../../../assets/No data-amico.svg","alt","No Data"],["cCardTitle",""],["cCardText",""],[2,"display","flex","flex-direction","column","gap","5vh",3,"formGroup"],["cInputGroupText",""],["bindLabel","color","bindValue","id","formControlName","colors","placeholder","Select items",3,"change","items","multiple"],["aria-label","Rej Type","cFormControl","","formControlName","rejType"],["aria-label","Reject Name","cFormControl","","formControlName","rejName"],["aria-label","Loss %","cFormControl","","formControlName","losses","type","number"]],template:function(e,t){if(e&1){let o=v();n(0,"c-header")(1,"c-container",3)(2,"c-header-brand",4),a(3,"Rej Type Master"),i(),n(4,"c-header-nav",5)(5,"c-nav-item")(6,"button",6),T("click",function(){return u(o),y(t.openPopup("Add"))}),a(7,"Add Rej Type"),i()()()(),m(8,"c-header-divider"),n(9,"c-container",3),C(10,Re,19,11,"div",7)(11,Me,8,0,"div",8),i()(),n(12,"c-modal",9,0)(14,"c-modal-header")(15,"h5",10),a(16),i(),m(17,"button",11,1),i(),n(19,"c-modal-body"),C(20,Ve,1,0,"ng-container",12),i(),n(21,"c-modal-footer")(22,"button",13),a(23," Close "),i(),n(24,"button",14),T("click",function(){return u(o),y(t.saveUpdate(t.popupIdentity))}),a(25),i()()(),C(26,ke,21,3,"ng-template",null,2,B)}if(e&2){let o=b(13),s=b(27);l(6),c("cModalToggle",o.id),l(4),c("ngIf",((t.rejtypeData==null?null:t.rejtypeData.length)||0)>0),l(),c("ngIf",((t.rejtypeData==null?null:t.rejtypeData.length)||0)===0),l(5),I(" ",t.popupIdentity==1?"Add New Rej Type":"Edit Rej Type"),l(),c("cModalToggle",o.id),l(3),c("ngTemplateOutlet",s),l(2),c("cModalToggle",o.id),l(3),g(t.popupIdentity==1?"Save changes":"Update changes")}},dependencies:[ie,Y,Z,ee,te,Q,X,oe,U,O,z,ce,W,re,se,ae,le,pe,ne,G,Ce,me,ye,de,ue,ge,he,$,K,J,H,L,P,Se,De,xe,be,_e,je,Te],styles:[".multiselect-dropdown .dropdown-list{max-height:none!important;height:auto!important}  .dropdown-list[_ngcontent-ng-c3395767766]{max-height:200px!important;overflow-y:auto!important;margin-bottom:0!important}  .multiselect-dropdown .dropdown-btn{border-radius:4px;min-height:38px;line-height:20px}  .multiselect-dropdown .dropdown-list{z-index:1050!important;max-height:200px;overflow-y:auto}  .multiselect-dropdown .dropdown-list .item2 span{white-space:normal!important}"]});var we=f;export{we as RejTypeComponent};
