import{a as Ce,d as Fe,e as Se}from"./chunk-3CQKJCQS.js";import{a as ve}from"./chunk-LBW5AWSH.js";import"./chunk-UZYPASHM.js";import{c as ce,e as u,f as se,g as me,k as pe,l as de,o as ue,p as he,q as ge,r as ye,t as fe,v as _e}from"./chunk-SVEOW7D2.js";import{$ as U,A as O,B as K,Da as re,G as P,H as q,X as R,Z as j,_ as Q,aa as $,da as W,ea as J,fa as X,ga as Y,ia as Z,na as ee,oa as te,pa as ie,qa as ne,ra as oe,sa as ae,ta as le}from"./chunk-37SJZKTR.js";import"./chunk-CZ6YIH4Q.js";import{A as G,d as k,e as B,g as L,k as z,z as H}from"./chunk-25OLHFVP.js";import{$b as _,Lc as V,Ob as m,Pb as n,Qb as i,Rb as f,Ub as D,Vb as C,Xa as r,bb as F,bc as d,fc as x,gc as b,hb as M,hc as A,ja as h,ka as g,lc as S,nb as y,qc as a,rc as p,sc as T,uc as w,vc as I,wc as N}from"./chunk-AONHZWD2.js";import{a as E}from"./chunk-AQY5CCQG.js";var be=["scrollableLongContentModal"],Ae=["closeBtn"];function Ee(s,t){if(s&1){let e=C();n(0,"tr")(1,"th",21),a(2),i(),n(3,"td",21),a(4),i(),n(5,"td",21),a(6),i(),n(7,"td",21),a(8),i(),n(9,"td",21),a(10),i(),n(11,"td",21),a(12),i(),n(13,"td",21)(14,"button",22),_("click",function(){let o=h(e).$implicit,c=d(2);return c.openPopup("Edit"),g(c.callEdit(o))}),f(15,"i",23),i()()()}if(s&2){let e=t.$implicit,l=t.index,o=d(2),c=S(13);r(2),p((o.page-1)*o.pageSize+l+1),r(2),p(e.knitFty),r(2),p(e.machineDia),r(2),p(e.brand),r(2),p(e.machineNos),r(2),p(e.prodDay),r(2),m("cModalToggle",c.id)}}function Me(s,t){if(s&1){let e=C();n(0,"div",15)(1,"table",16)(2,"thead")(3,"tr")(4,"th",17),a(5,"#"),i(),n(6,"th",17),a(7,"Knit Factory"),i(),n(8,"th",17),a(9,"Machine Dia "),i(),n(10,"th",17),a(11,"Brand"),i(),n(12,"th",17),a(13,"MC Nos"),i(),n(14,"th",17),a(15,"Production Days"),i(),n(16,"th",17),a(17,"Action"),i()()(),n(18,"tbody"),y(19,Ee,16,7,"tr",18),i()(),n(20,"div",19)(21,"ngb-pagination",20),N("pageChange",function(o){h(e);let c=d();return I(c.page,o)||(c.page=o),g(o)}),i()()()}if(s&2){let e=d();r(),m("striped",!0),r(18),m("ngForOf",e.machineAllocationList.slice((e.page-1)*e.pageSize,e.page*e.pageSize)),r(2),w("page",e.page),m("pageSize",e.pageSize)("collectionSize",e.machineAllocationList.length)}}function De(s,t){s&1&&(n(0,"div",24)(1,"c-card",25),f(2,"img",26),n(3,"c-card-body")(4,"h5",27),a(5,"No Data Found"),i(),n(6,"p",28),a(7," There are no machine Allocation records available at the moment. "),i()()()())}function Te(s,t){s&1&&D(0)}function we(s,t){if(s&1&&(n(0,"option",37),a(1),i()),s&2){let e=t.$implicit;m("value",e.knitFty),r(),p(e.knitFty)}}function Ie(s,t){if(s&1&&(n(0,"option",37),a(1),i()),s&2){let e=t.$implicit;m("value",e.machineDia),r(),p(e.machineDia)}}function Ne(s,t){if(s&1&&(n(0,"option",37),a(1),i()),s&2){let e=t.$implicit;m("value",e.brand),r(),p(e.brand)}}function Ve(s,t){if(s&1){let e=C();n(0,"div",29)(1,"div")(2,"c-input-group")(3,"span",30),a(4,"Knit Factory"),i(),n(5,"select",31),_("change",function(o){h(e);let c=d();return g(c.getKniteFty(o))}),n(6,"option"),a(7,"Select Knit Factory"),i(),y(8,we,2,2,"option",32),i()()(),n(9,"div")(10,"c-input-group")(11,"span",30),a(12,"MachineDia"),i(),n(13,"select",33),_("change",function(o){h(e);let c=d();return g(c.getFSize(o))}),n(14,"option"),a(15,"Select MachineDia"),i(),y(16,Ie,2,2,"option",32),i()()(),n(17,"div")(18,"c-input-group")(19,"span",30),a(20,"Brand"),i(),n(21,"select",34),_("change",function(o){h(e);let c=d();return g(c.getstyleId(o))}),n(22,"option"),a(23,"Select Brand"),i(),y(24,Ne,2,2,"option",32),i()()(),n(25,"div")(26,"c-input-group")(27,"span",30),a(28,"Existing machine Nos"),i(),f(29,"input",35),i()(),n(30,"div")(31,"c-input-group")(32,"span",30),a(33,"prodDay"),i(),f(34,"input",36),i()()()}if(s&2){let e=d();m("formGroup",e.machineAllocationForm),r(8),m("ngForOf",e.listKnitFty),r(8),m("ngForOf",e.listFSize),r(8),m("ngForOf",e.listStyle)}}var v=class v{constructor(t,e,l){this.router=t;this.fb=e;this.api=l;this.page=1;this.pageSize=5;this.visible=!0;this.editTooltip="Edit";this.popupIdentity=0;this.filterStyle="";this.filterknitfty="";this.machineAllocationList=[];this.profileList=[];this.filtermachine="";this.machineAllocationForm=this.fb.group({knitFty:[null,[u.required]],knitFty_id:[null,[u.required]],machineDia:[null,[u.required]],fsize_id:[null,[u.required]],brand:[null,[u.required]],style_id:[null,[u.required]],machineNos:[null,[u.required]],prodDay:[null,[u.required]]})}openPopup(t){t=="Add"?(this.machineAllocationForm.reset(),this.popupIdentity=1):(this.machineAllocationForm.reset(),this.popupIdentity=2)}ngOnInit(){this.listMachineAllocation(),this.listStyleFn(),this.listKniteFtyFn(),this.listFSizeFn()}listMachineAllocation(){this.api.GetApi(`/mastersapi/machine-list?machineDia=${this.filtermachine}`).subscribe(t=>{this.machineAllocationList=t.data})}listStyleFn(){this.api.GetApi(`/mastersapi/style-master-filter?style=${this.filterStyle}`).subscribe(t=>{this.listStyle=t.styles})}listKniteFtyFn(){this.api.GetApi(`/mastersapi/knitFty-master-filter?knitFty=${this.filterknitfty}`).subscribe(t=>{this.listKnitFty=t.knitFty})}listFSizeFn(){this.api.GetApi("/mastersapi/fsize-master").subscribe(t=>{this.listFSize=t.fsize})}getstyleId(t){let l=t.target.value,o=this.listStyle.find(c=>c.brand===l);this.machineAllocationForm.controls.style_id.setValue(o.id)}getKniteFty(t){let l=t.target.value,o=this.listKnitFty.find(c=>c.knitFty===l);this.machineAllocationForm.controls.knitFty_id.setValue(o.id)}getFSize(t){let l=t.target.value,o=this.listFSize.find(c=>Number(c.machineDia)===Number(l));this.machineAllocationForm.controls.fsize_id.setValue(o.id)}callEdit(t){this.editId=t.id,this.machineAllocationForm.controls.knitFty.setValue(t.knitFty),this.machineAllocationForm.controls.knitFty_id.setValue(t.knitFty_id),this.machineAllocationForm.controls.machineDia.setValue(t.machineDia),this.machineAllocationForm.controls.fsize_id.setValue(t.fsize_id),this.machineAllocationForm.controls.brand.setValue(t.brand),this.machineAllocationForm.controls.style_id.setValue(t.style_id),this.machineAllocationForm.controls.machineNos.setValue(t.machineNos),this.machineAllocationForm.controls.prodDay.setValue(t.prodDay)}saveUpdate(t){if(!this.machineAllocationForm.invalid)if(t===1)this.api.PostApiWithHeader("/mastersapi/machine-list",this.machineAllocationForm.value).subscribe(e=>{e.success===!0?(this.listMachineAllocation(),this.closeBtn.nativeElement.click(),this.machineAllocationForm.reset(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")});else{let e=E({id:this.editId},this.machineAllocationForm.value);this.api.PostApiWithHeader("/mastersapi/machine-list",e).subscribe(l=>{l.success===!0?(this.closeBtn.nativeElement.click(),this.machineAllocationForm.reset(),this.listMachineAllocation(),this.api.showSuccess("Updated Successfully !!! ","Updated")):this.api.showError("Not Updated","Error")})}}};v.\u0275fac=function(e){return new(e||v)(F(H),F(fe),F(ve))},v.\u0275cmp=M({type:v,selectors:[["app-machine-allocation"]],viewQuery:function(e,l){if(e&1&&(x(be,5),x(Ae,5)),e&2){let o;b(o=A())&&(l.scrollableLongContentModal=o.first),b(o=A())&&(l.closeBtn=o.first)}},decls:28,vars:8,consts:[["scrollableLongContentModal",""],["closeBtn",""],["longContent",""],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click","cModalToggle"],["style","overflow-x: auto; width: 100%;",4,"ngIf"],["class","d-flex justify-content-center align-items-center","style","height: 100vh; width: 100%;",4,"ngIf"],["backdrop","static","id","scrollableLongContentModal","scrollable",""],["cModalTitle",""],["cButtonClose","",3,"cModalToggle"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"cModalToggle"],["cButton","","color","primary",3,"click"],[2,"overflow-x","auto","width","100%"],["bordered","","cTable","",1,"table","table-hover",3,"striped"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[3,"pageChange","page","pageSize","collectionSize"],["scope","row",1,"text-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click","cModalToggle"],[1,"cil-pencil"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100vh","width","100%"],[2,"max-width","400px","text-align","center"],["cCardImg","top","src","../../../../assets/No data-amico.svg","alt","No Data"],["cCardTitle",""],["cCardText",""],[2,"display","flex","flex-direction","column","gap","5vh",3,"formGroup"],["cInputGroupText",""],["aria-label","Knit Factory","cSelect","","formControlName","knitFty",3,"change"],[3,"value",4,"ngFor","ngForOf"],["aria-label","MachineDia","cSelect","","formControlName","machineDia",3,"change"],["aria-label","Brand","cSelect","","formControlName","brand",3,"change"],["aria-label","Existing machine Nos","cFormControl","","formControlName","machineNos","type","number"],["aria-label","prodDay","cFormControl","","formControlName","prodDay","type","number"],[3,"value"]],template:function(e,l){if(e&1){let o=C();n(0,"c-header")(1,"c-container",3)(2,"c-header-brand",4),a(3,"MachineAllocation Master"),i(),n(4,"c-header-nav",5)(5,"c-nav-item")(6,"button",6),_("click",function(){return h(o),g(l.openPopup("Add"))}),a(7,"Add MachineAllocation"),i()()()(),f(8,"c-header-divider"),n(9,"c-container",3),y(10,Me,22,5,"div",7)(11,De,8,0,"div",8),i()(),n(12,"c-modal",9,0)(14,"c-modal-header")(15,"h5",10),a(16),i(),f(17,"button",11,1),i(),n(19,"c-modal-body"),y(20,Te,1,0,"ng-container",12),i(),n(21,"c-modal-footer")(22,"button",13),a(23," Close "),i(),n(24,"button",14),_("click",function(){return h(o),g(l.saveUpdate(l.popupIdentity))}),a(25),i()()(),y(26,Ve,35,4,"ng-template",null,2,V)}if(e&2){let o=S(13),c=S(27);r(6),m("cModalToggle",o.id),r(4),m("ngIf",((l.machineAllocationList==null?null:l.machineAllocationList.length)||0)>0),r(),m("ngIf",((l.machineAllocationList==null?null:l.machineAllocationList.length)||0)===0),r(5),T(" ",l.popupIdentity==1?"Add New MachineAllocation":"Edit MachineAllocation"),r(),m("cModalToggle",o.id),r(3),m("ngTemplateOutlet",c),r(2),m("cModalToggle",o.id),r(3),p(l.popupIdentity==1?"Save changes":"Update changes")}},dependencies:[Z,W,J,X,Y,G,$,ee,O,q,P,re,K,te,le,ne,oe,ae,ie,L,_e,ge,ye,ce,pe,he,se,me,de,ue,j,Q,U,R,z,k,B,Se,Fe,Ce],encapsulation:2});var xe=v;export{xe as MachineAllocationComponent};
