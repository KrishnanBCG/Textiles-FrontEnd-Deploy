import{a as pe}from"./chunk-MUOSKTGI.js";import"./chunk-RXRC2IAU.js";import{c as Y,e as b,f as Z,g as ee,l as te,o as oe,p as ie,q as re,r as ne,t as le,v as ae}from"./chunk-DO327FSU.js";import{$ as L,A as N,B as A,Ga as X,Z as B,aa as P,ba as G,ca as H,fa as O,ga as k,ha as V,ia as U,la as j,qa as q,ra as $,sa as W,ta as z,ua as J,va as K,wa as Q}from"./chunk-W7O4NI74.js";import"./chunk-RXWOWTKC.js";import{d as F,g as E,j as I,y as R,z as w}from"./chunk-H4Z643GT.js";import{Ac as r,Bc as d,Cc as x,Rb as p,Sb as i,Tb as t,Ub as f,Vc as T,Za as l,_b as _,cc as M,ic as h,ka as C,kb as u,la as g,lc as S,pb as D,vb as c,vc as y}from"./chunk-G573C4CW.js";import"./chunk-AQY5CCQG.js";function me(a,e){if(a&1&&(i(0,"tr")(1,"th",15),r(2),t(),i(3,"td",16),r(4),t()()),a&2){let o=e.$implicit,n=e.index;l(2),d(n+1),l(2),d(o.name)}}function ce(a,e){a&1&&_(0)}function de(a,e){if(a&1&&(i(0,"option",22),r(1),t()),a&2){let o=e.$implicit;p("value",o.id),l(),d(o.profileName)}}function ue(a,e){if(a&1&&(i(0,"div",17)(1,"div")(2,"c-input-group")(3,"span",18),r(4,"Profile"),t(),i(5,"select",19)(6,"option"),r(7,"Select Profile"),t(),c(8,de,2,2,"option",20),t()()(),i(9,"div")(10,"c-input-group")(11,"span",18),r(12,"Roles"),t(),f(13,"input",21),t()()()),a&2){let o=S();p("formGroup",o.rolesForm),l(8),p("ngForOf",o.profileList)}}var m=class m{constructor(e,o,n){this.router=e;this.fb=o;this.api=n;this.visible=!0;this.editTooltip="Edit";this.popupIdentity=0;this.rolesList=[];this.profileList=[];this.rolesForm=this.fb.group({name:[null,[b.required]],profiles:[null,[b.required]]})}openPopup(e){e=="Add"?this.popupIdentity=1:this.popupIdentity=2}ngOnInit(){this.listProfile(),this.listRoles()}listRoles(){this.api.GetApi("/roleapi/roles").subscribe(e=>{this.rolesList=e.roles})}listProfile(){this.api.GetApi("/profileapi/profile").subscribe(e=>{this.profileList=e.profiles})}callEdit(e){this.editId=e}saveUpdate(e){if(e===1){let o={name:this.rolesForm.controls.name.value,profiles:[this.rolesForm.controls.profiles.value]};this.api.PostApiWithHeader("/roleapi/roles",o).subscribe(n=>{n.success===!0?(this.listRoles(),this.api.showSuccess("saved Successfully !!! ","Saved")):this.api.showError("Not saved","Error")})}else{let o={id:this.editId,name:this.rolesForm.controls.name.value,profiles:[this.rolesForm.controls.profiles.value]};this.api.GetByIdApi("/roleapi/roles",o).subscribe(n=>{n.success===!0?(this.listProfile(),this.api.showSuccess("Updated Successfully !!! ","Updated")):this.api.showError("Not Updated","Error")})}}};m.\u0275fac=function(o){return new(o||m)(u(R),u(le),u(pe))},m.\u0275cmp=D({type:m,selectors:[["app-roles-master"]],decls:34,vars:8,consts:[["scrollableLongContentModal",""],["longContent",""],["fluid",""],[3,"routerLink"],[1,"ms-auto"],["cButton","","color","primary","variant","outline",3,"click","cModalToggle"],["cTable","","color","success",3,"striped"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["backdrop","static","id","scrollableLongContentModal","scrollable",""],["cModalTitle",""],["cButtonClose","",3,"cModalToggle"],[4,"ngTemplateOutlet"],["cButton","","color","secondary",3,"cModalToggle"],["cButton","","color","primary",3,"click"],["scope","row",1,"text-center"],[1,"text-center"],[2,"display","flex","flex-direction","column","gap","5vh",3,"formGroup"],["cInputGroupText",""],["aria-label","Profile","cSelect","","formControlName","profiles"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Roles","cFormControl","","formControlName","name"],[3,"value"]],template:function(o,n){if(o&1){let s=M();i(0,"c-header")(1,"c-container",2)(2,"c-header-brand",3),r(3,"Role Master"),t(),i(4,"c-header-nav",4)(5,"c-nav-item")(6,"button",5),h("click",function(){return C(s),g(n.openPopup("Add"))}),r(7,"Add Roles"),t()()()(),f(8,"c-header-divider"),i(9,"c-container",2)(10,"table",6)(11,"thead")(12,"tr")(13,"th",7),r(14,"#"),t(),i(15,"th",7),r(16,"Roles"),t()()(),i(17,"tbody"),c(18,me,5,2,"tr",8),t()()()(),i(19,"c-modal",9,0)(21,"c-modal-header")(22,"h5",10),r(23),t(),f(24,"button",11),t(),i(25,"c-modal-body"),c(26,ce,1,0,"ng-container",12),t(),i(27,"c-modal-footer")(28,"button",13),r(29," Close "),t(),i(30,"button",14),h("click",function(){return C(s),g(n.saveUpdate(n.popupIdentity))}),r(31),t()()(),c(32,ue,14,2,"ng-template",null,1,T)}if(o&2){let s=y(20),v=y(33);l(6),p("cModalToggle",s.id),l(4),p("striped",!0),l(8),p("ngForOf",n.rolesList),l(5),x(" ",n.popupIdentity==1?"Add New Roles":"Edit Roles"),l(),p("cModalToggle",s.id),l(2),p("ngTemplateOutlet",v),l(2),p("cModalToggle",s.id),l(3),d(n.popupIdentity==1?"Save changes":"Update changes")}},dependencies:[j,O,k,V,U,w,H,q,N,X,A,$,Q,z,J,K,W,E,ae,re,ne,Y,ie,Z,ee,te,oe,L,P,G,B,I,F],styles:[".header-toggler-icon[_ngcontent-%COMP%]{min-width:25px}"]});var se=m;export{se as RolesMasterComponent};
